var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},StageUtils=function(){function t(){}return t.registStage=function(e){t.stage=e,t.CW=e.stageWidth>>1,t.CH=e.stageHeight>>1},t.centerInParentX=function(e,i){void 0===i&&(i=null),e&&(i?e.x=i.width-e.width>>1:e.x=t.stage.stageWidth-e.width>>1)},t.centerInParentY=function(e,i){void 0===i&&(i=null),e&&(i?e.y=i.height-e.height>>1:e.y=t.stage.stageHeight-e.height>>1)},t.centerInParent=function(e,i,s,a){void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=null),e&&(a?(e.x=(a.width-e.width>>1)+i,e.y=(a.height-e.height>>1)+s):(e.x=(t.stage.stageWidth-e.width>>1)+i,e.y=(t.stage.stageHeight-e.height>>1)+s))},t}();__reflect(StageUtils.prototype,"StageUtils");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var AssetsUtils=function(){function t(){}return t.createBitmapByName=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=new egret.Bitmap,a=RES.getRes(t);return s.texture=a,s.x=e,s.y=i,s},t}();__reflect(AssetsUtils.prototype,"AssetsUtils");var EventName=function(){function t(){}return t}();EventName.Start_Game="1",EventName.Logo_End="2",EventName.Ball_Click="3",EventName.Into_Content="4",__reflect(EventName.prototype,"EventName");var GameDispatcher=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}(egret.EventDispatcher);__reflect(GameDispatcher.prototype,"GameDispatcher");var HttpService=function(){function t(t,e){void 0===e&&(e=egret.HttpMethod.GET),this.data=t,this.post=e}return t.prototype.exec=function(){var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,this.post==egret.HttpMethod.GET?t.open(this.url+"?"+this.data,this.post):t.open(this.url,this.post),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.addEventListener(egret.Event.COMPLETE,this.onComplete,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this.post==egret.HttpMethod.GET?t.send(this.data):t.send()},t.prototype.onComplete=function(t){var e=t.currentTarget;this.result(e.response)},t.prototype.onIOError=function(){},t.prototype.result=function(t){},t}();__reflect(HttpService.prototype,"HttpService");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){StageUtils.registStage(this.stage),this.gameScene=new GameScene,this.addChild(this.gameScene),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/");var e=this;window.onorientationchange=function(t){0!=window.orientation&&e.gameScene.refreshBg()}},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading")},e.prototype.onResourceLoadComplete=function(t){if("preload"==t.groupName)this.gameScene.setComplete(),RES.loadGroup("music");else if("loading"==t.groupName)this.gameScene.showBG(),this.gameScene.showLoading(),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload");else if("music"==t.groupName){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),e.loaded_music=!0;var i=RES.getRes("bg_mp3");i.play()}},e.prototype.onLoadComplete=function(t){alert("加载完成");var e=t.target;e.data},e.prototype.error=function(t){console.log(t)},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.gameScene.setProgress(t.itemsLoaded,t.itemsTotal)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var BallView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initView=function(t){this.index=t,this.imgBall=AssetsUtils.createBitmapByName("ball"+t+"_png"),this.imgBall.anchorOffsetX=100,this.imgBall.anchorOffsetY=100,this.imgBall.x=StageUtils.CW,this.imgBall.y=StageUtils.CH-100,this.addChild(this.imgBall),this.selectBg1=AssetsUtils.createBitmapByName("ball_bg2_png"),this.selectBg1.anchorOffsetX=224,this.selectBg1.anchorOffsetY=228,this.selectBg1.x=this.imgBall.x,this.selectBg1.y=this.imgBall.y,this.addChild(this.selectBg1),this.selectBg2=AssetsUtils.createBitmapByName("ball_bg3_png"),this.selectBg2.anchorOffsetX=224,this.selectBg2.anchorOffsetY=228,this.selectBg2.x=this.imgBall.x,this.selectBg2.y=this.imgBall.y,this.addChild(this.selectBg2),this.selectBg3=AssetsUtils.createBitmapByName("ball_bg4_png"),this.selectBg3.anchorOffsetX=112,this.selectBg3.anchorOffsetY=104,this.selectBg3.x=this.imgBall.x+0,this.selectBg3.y=this.imgBall.y+2,this.selectBg3.scaleX=this.selectBg3.scaleY=2,this.addChild(this.selectBg3);var e=new egret.Shape;e.graphics.beginFill(0),e.graphics.drawCircle(this.selectBg3.x,this.selectBg3.y,2),e.graphics.endFill(),this.addChild(e),this.selectBg1.alpha=0,this.selectBg2.alpha=0,this.selectBg3.alpha=0,this.imgText=AssetsUtils.createBitmapByName("p3_c"+t+"_png"),StageUtils.centerInParent(this.imgText),this.imgText.y+=200,this.addChild(this.imgText),this.btnOpen=AssetsUtils.createBitmapByName("search_png"),StageUtils.centerInParent(this.btnOpen),this.btnOpen.y+=300,this.addChild(this.btnOpen),this.btnOpen.touchEnabled=!0,this.btnOpen.addEventListener(egret.TouchEvent.TOUCH_END,this.openClick,this),this.showFlash()},e.prototype.showFlash=function(){this.imgBall.alpha=0,egret.Tween.get(this.imgBall).to({scaleX:1.75,scaleY:1.75,alpha:1},500),this.imgText.alpha=0,egret.Tween.get(this.imgText).to({alpha:1},500),this.btnOpen.alpha=0,egret.Tween.get(this.btnOpen).wait(500).to({alpha:1},500),egret.Tween.get(this.selectBg1).wait(500).to({alpha:1},500),egret.Tween.get(this.selectBg2).wait(500).to({alpha:1},500),egret.Tween.get(this.selectBg3).wait(500).to({alpha:1},500),egret.Tween.get(this.selectBg2,{loop:!0}).to({rotation:360},5e3),egret.Tween.get(this.selectBg3,{loop:!0}).to({rotation:-360},5e3)},e.prototype.openClick=function(){if(this.index)if(4==this.index)window.location.href="http://res.leasiondata.cn/lstatic/demo/kzw-ball/index.html";else{if(Main.loaded_music){var t=RES.getRes("loading_click_mp3");t.play(.8,1)}GameDispatcher.instance.dispatchEventWith(EventName.Into_Content,!1,this.index)}},e}(egret.DisplayObjectContainer);__reflect(BallView.prototype,"BallView");var ContentView=function(t){function e(){var e=t.call(this)||this;return e.tempT=0,e.initView(),e}return __extends(e,t),e.prototype.returnClickHandler=function(){if(Main.loaded_music){var t=RES.getRes("loading_click_mp3");t.play(.5,1)}GameScene.instance.hideContent(),GameScene.instance.showMain()},e.prototype.initView=function(){this.bg=AssetsUtils.createBitmapByName("kuang_png"),StageUtils.centerInParent(this.bg),this.addChild(this.bg),this.y1=this.bg.y,this.container=new egret.Sprite,this.container.graphics.beginFill(0,.01),this.container.graphics.drawRect(0,0,StageUtils.stage.stageWidth,2*StageUtils.stage.stageHeight),this.container.graphics.endFill(),this.addChild(this.container),this.container.touchEnabled=!0,this.container.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.container.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.container.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.container.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this);var t=new egret.Shape;t.graphics.beginFill(0),t.graphics.drawRect(this.bg.x,this.bg.y+200,this.bg.width,this.bg.height-100),t.graphics.endFill(),this.addChild(t),this.container.mask=t,this.isFirst=!0,this.angle=360,this.btnReturn=AssetsUtils.createBitmapByName("btnReturn_png"),this.btnReturn.x=StageUtils.stage.stageWidth-this.btnReturn.width,this.btnReturn.y=StageUtils.stage.stageHeight-this.btnReturn.height,this.btnReturn.touchEnabled=!0,this.btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.returnClickHandler,this),this.addChild(this.btnReturn),this.addEventListener(egret.Event.ENTER_FRAME,this.efHandler,this),this.tempT=egret.getTimer()},e.prototype.efHandler=function(t){var e=egret.getTimer();this.bl&&e-this.tempT>1e3&&(this.tempT=e,this.bl=!1,this.moveEnd(this.select))},e.prototype.touchBegin=function(t){this.bl=!0,this.beginY=t.stageY,this.beginTime=egret.getTimer(),this.tempT=this.beginTime,this.beginStageY=0,console.log("touchBegin:"+this.beginY)},e.prototype.touchMove=function(t){if(this.tempT=egret.getTimer(),this.beginStageY){var e=t.stageY,i=e-this.beginStageY;this.container.y+=i}this.beginStageY=t.stageY},e.prototype.touchEnd=function(t){this.bl=!1;var e=t.stageY,i=egret.getTimer(),s=(e-this.beginY)/(i-this.beginTime);console.log("touchEnd:"+s,e,this.beginY,i,this.beginTime),Math.abs(s)<.3?this.moveEnd(this.select):s>0?this.moveEnd(0):0==this.select?this.moveEnd(1):this.moveEnd(1)},e.prototype.moveEnd=function(t){egret.Tween.removeTweens(this.container),0==t?egret.Tween.get(this.container).to({y:0},500,egret.Ease.circOut).call(this.moveEndEnd,this,[this.select!=t]):egret.Tween.get(this.container).to({y:-StageUtils.stage.stageHeight},500,egret.Ease.circOut).call(this.moveEndEnd,this,[this.select!=t]),this.select=t},e.prototype.moveEndEnd=function(t){if(t&&this.isFirst){var e=StageUtils.stage.stageHeight;if(this.isFirst=!1,1==this.index)this.icon5.alpha=0,this.icon6.alpha=0,this.icon7.alpha=0,this.bg1_2.alpha=0,egret.Tween.get(this.bg1_2).to({alpha:1},200),egret.Tween.get(this.icon5).wait(200).to({alpha:1},200),egret.Tween.get(this.icon6).wait(400).to({alpha:1},200),egret.Tween.get(this.icon7).wait(600).to({alpha:1},200);else if(2==this.index){this.icon4.alpha=0,this.icon5.alpha=0,this.icon6.alpha=0,this.icon7.alpha=0,this.icon8.alpha=0,this.icon9.alpha=0,this.icon10.alpha=0,egret.Tween.get(this.icon4).to({alpha:1},200),egret.Tween.get(this.icon5).to({alpha:1},200),egret.Tween.get(this.icon6).to({alpha:1},200),egret.Tween.get(this.icon7).to({alpha:1},200),egret.Tween.get(this.icon8).to({alpha:1},200),egret.Tween.get(this.icon9).to({alpha:1},200),egret.Tween.get(this.icon10).to({alpha:1},200);var i=this.icon6.y;egret.Tween.get(this.icon6,{loop:!0}).to({y:i+10},300).to({y:i},300);var s=this.icon7.y;egret.Tween.get(this.icon7,{loop:!0}).to({scaleY:.9,y:s+15},200).to({scaleY:1,y:s},200),egret.Tween.get(this.icon10,{loop:!0}).to({rotation:5},200).to({rotation:0},200)}else if(3==this.index){var a=this.icon3.y,n=this.icon4.y;this.icon3.y=2*e,this.icon4.y=2*e,egret.Tween.get(this.icon3).to({y:a,alpha:1},500),egret.Tween.get(this.icon4).wait(500).to({y:n,alpha:1},500)}else if(5==this.index){var h=this.icon8.y,l=this.icon9.y,r=this.icon10.y;this.icon8.y=2*e,this.icon9.y=2*e,this.icon10.y=2*e,egret.Tween.get(this.icon8).to({y:h,alpha:1},500),egret.Tween.get(this.icon9).wait(500).to({y:l,alpha:1},500),egret.Tween.get(this.icon10).wait(1e3).to({y:r,alpha:1},500)}}},e.prototype.setData=function(t){this.index=t,this.select=0;var e,i,s=StageUtils.stage.stageHeight;if(1==t){e="p4_1_title",i="p4_2_title";var a=AssetsUtils.createBitmapByName(e+"_png");StageUtils.centerInParent(a,this.bg.x,this.bg.y-240,this.bg),this.container.addChild(a);var n=AssetsUtils.createBitmapByName("content1_1_png");StageUtils.centerInParent(n,this.bg.x,this.bg.y+60,this.bg),this.container.addChild(n);var h=AssetsUtils.createBitmapByName("content1_2_png");StageUtils.centerInParent(h,this.bg.x+60,this.bg.y-135,this.bg),this.container.addChild(h);var l=AssetsUtils.createBitmapByName("content1_3_png");StageUtils.centerInParent(l,this.bg.x-97,this.bg.y-10,this.bg),this.container.addChild(l);var r=AssetsUtils.createBitmapByName("content1_4_png");StageUtils.centerInParent(r,this.bg.x+115,this.bg.y+58,this.bg),this.container.addChild(r);var o=AssetsUtils.createBitmapByName("content1_5_png");StageUtils.centerInParent(o,this.bg.x-12,this.bg.y+215,this.bg),this.container.addChild(o);var g=AssetsUtils.createBitmapByName("content_arrow_png");StageUtils.centerInParent(g,this.bg.x,this.bg.y+400,this.bg),this.container.addChild(g),n.alpha=0,h.alpha=0,l.alpha=0,r.alpha=0,o.alpha=0,egret.Tween.get(n).wait(200).to({alpha:1},200),egret.Tween.get(h).wait(400).to({alpha:1},200),egret.Tween.get(l).wait(600).to({alpha:1},200),egret.Tween.get(r).wait(800).to({alpha:1},200),egret.Tween.get(o).wait(1e3).to({alpha:1},200);var c=AssetsUtils.createBitmapByName(i+"_png");StageUtils.centerInParent(c,this.bg.x,this.bg.y-240+s,this.bg),this.container.addChild(c);var p=AssetsUtils.createBitmapByName("content1_6_png");StageUtils.centerInParent(p,this.bg.x,this.bg.y+70+s,this.bg),this.container.addChild(p);var d=AssetsUtils.createBitmapByName("content1_7_png");StageUtils.centerInParent(d,this.bg.x,this.bg.y+70+s,this.bg),this.container.addChild(d);var m=AssetsUtils.createBitmapByName("content1_8_png");StageUtils.centerInParent(m,this.bg.x,this.bg.y+50+s,this.bg),this.container.addChild(m);var b=AssetsUtils.createBitmapByName("content_buttom_png");StageUtils.centerInParent(b,this.bg.x,this.bg.y+420+s,this.bg),this.container.addChild(b),this.icon5=d,this.icon6=m,this.icon7=b,this.bg1_2=p,this.icon5.alpha=0,this.icon6.alpha=0,this.icon7.alpha=0,this.bg1_2.alpha=0}else if(2==t){e="p5_1_title",i="p5_2_title";var a=AssetsUtils.createBitmapByName(e+"_png");StageUtils.centerInParent(a,this.bg.x,this.bg.y-240,this.bg),this.container.addChild(a);var h=AssetsUtils.createBitmapByName("content2_1_png");StageUtils.centerInParent(h,this.bg.x,this.bg.y+100,this.bg),this.container.addChild(h);var l=AssetsUtils.createBitmapByName("content2_3_png");StageUtils.centerInParent(l,this.bg.x+38,this.bg.y+80,this.bg),l.scaleX=l.scaleY=.8,this.container.addChild(l);var r=AssetsUtils.createBitmapByName("content2_4_png");StageUtils.centerInParent(r,this.bg.x-150,this.bg.y+40,this.bg),this.container.addChild(r);var o=AssetsUtils.createBitmapByName("content2_5_png");StageUtils.centerInParent(o,this.bg.x+150,this.bg.y+50,this.bg),this.container.addChild(o);var g=AssetsUtils.createBitmapByName("content_arrow_png");StageUtils.centerInParent(g,this.bg.x,this.bg.y+400,this.bg),this.container.addChild(g);var y=h.y;h.alpha=0,h.y=this.bg.y-100,l.alpha=0,r.alpha=0,o.alpha=0,egret.Tween.get(h).wait(200).to({alpha:1,y:y},500,egret.Ease.backOut).call(function(){h.texture=RES.getRes("content2_2_png")}),egret.Tween.get(l).wait(700).to({alpha:1},200),egret.Tween.get(r).wait(900).to({alpha:1},200),egret.Tween.get(o).wait(1100).to({alpha:1},200);var c=AssetsUtils.createBitmapByName(i+"_png");StageUtils.centerInParent(c,this.bg.x,this.bg.y-240+s,this.bg),this.container.addChild(c);var o=AssetsUtils.createBitmapByName("content2_6_png");StageUtils.centerInParent(o,this.bg.x,this.bg.y+30+s,this.bg),this.container.addChild(o);var d=AssetsUtils.createBitmapByName("content2_7_png");StageUtils.centerInParent(d,this.bg.x,this.bg.y+310+s,this.bg),this.container.addChild(d);var m=AssetsUtils.createBitmapByName("content2_8_png");StageUtils.centerInParent(m,this.bg.x-180,this.bg.y-20+s,this.bg),this.container.addChild(m);var b=AssetsUtils.createBitmapByName("content2_9_png");StageUtils.centerInParent(b,this.bg.x-90,this.bg.y-55+s,this.bg),this.container.addChild(b);var _=AssetsUtils.createBitmapByName("content2_10_png");StageUtils.centerInParent(_,this.bg.x-40,this.bg.y-150+s,this.bg),this.container.addChild(_);var B=AssetsUtils.createBitmapByName("content2_11_png");StageUtils.centerInParent(B,this.bg.x+120,this.bg.y-130+s,this.bg),this.container.addChild(B);var u=AssetsUtils.createBitmapByName("content2_12_png");StageUtils.centerInParent(u,this.bg.x+120,this.bg.y-30+s,this.bg),this.container.addChild(u),this.icon4=o,this.icon5=d,this.icon6=m,this.icon7=b,this.icon8=_,this.icon9=B,this.icon10=u,this.icon4.alpha=0,this.icon5.alpha=0,this.icon6.alpha=0,this.icon7.alpha=0,this.icon8.alpha=0,this.icon9.alpha=0,this.icon10.alpha=0}else if(3==t){e="p6_1_title",i="p6_2_title";var a=AssetsUtils.createBitmapByName(e+"_png");StageUtils.centerInParent(a,this.bg.x,this.bg.y-240,this.bg),this.container.addChild(a);var h=AssetsUtils.createBitmapByName("content3_3_png");StageUtils.centerInParent(h,this.bg.x,this.bg.y-70,this.bg),this.container.addChild(h);var l=AssetsUtils.createBitmapByName("content3_4_png");StageUtils.centerInParent(l,this.bg.x,this.bg.y+200,this.bg),this.container.addChild(l);var g=AssetsUtils.createBitmapByName("content_arrow_png");StageUtils.centerInParent(g,this.bg.x,this.bg.y+400,this.bg),this.container.addChild(g),h.alpha=0,l.alpha=0;var w=h.y,v=l.y;h.y=s,l.y=s,egret.Tween.get(h).to({y:w,alpha:1},500),egret.Tween.get(l).wait(500).to({y:v,alpha:1},500);var c=AssetsUtils.createBitmapByName(i+"_png");StageUtils.centerInParent(c,this.bg.x,this.bg.y-240+s,this.bg),this.container.addChild(c);var r=AssetsUtils.createBitmapByName("content3_1_png");StageUtils.centerInParent(r,this.bg.x,this.bg.y+10+s,this.bg),this.container.addChild(r);var o=AssetsUtils.createBitmapByName("content3_2_png");StageUtils.centerInParent(o,this.bg.x,this.bg.y+290+s,this.bg),this.container.addChild(o),r.alpha=0,o.alpha=0,this.icon3=r,this.icon4=o}else if(4==t);else if(5==t){e="p8_1_title",i="p4_2_title";var a=AssetsUtils.createBitmapByName(e+"_png");StageUtils.centerInParent(a,this.bg.x,this.bg.y-240,this.bg),this.container.addChild(a),this.bg1_1=AssetsUtils.createBitmapByName("p2_yuan_png"),StageUtils.centerInParent(this.bg1_1,this.bg.x,this.bg.y+50,this.bg),this.container.addChild(this.bg1_1);var h=AssetsUtils.createBitmapByName("content5_1_png");StageUtils.centerInParent(h,this.bg.x,this.bg.y+60,this.bg),this.container.addChild(h);var l=AssetsUtils.createBitmapByName("content5_2_png");StageUtils.centerInParent(l,this.bg.x,this.bg.y-110,this.bg),this.container.addChild(l);var r=AssetsUtils.createBitmapByName("content5_3_png");StageUtils.centerInParent(r,this.bg.x+150,this.bg.y-120,this.bg),this.container.addChild(r);var o=AssetsUtils.createBitmapByName("content5_4_png");StageUtils.centerInParent(o,this.bg.x+220,this.bg.y+110,this.bg),this.container.addChild(o);var d=AssetsUtils.createBitmapByName("content5_5_png");StageUtils.centerInParent(d,this.bg.x+140,this.bg.y+270,this.bg),this.container.addChild(d);var m=AssetsUtils.createBitmapByName("content5_6_png");StageUtils.centerInParent(m,this.bg.x-140,this.bg.y+270,this.bg),this.container.addChild(m);var b=AssetsUtils.createBitmapByName("content5_7_png");StageUtils.centerInParent(b,this.bg.x-220,this.bg.y+110,this.bg),this.container.addChild(b);var g=AssetsUtils.createBitmapByName("content_arrow_png");StageUtils.centerInParent(g,this.bg.x,this.bg.y+400,this.bg),this.container.addChild(g),h.alpha=0,l.alpha=0,r.alpha=0,o.alpha=0,d.alpha=0,m.alpha=0,b.alpha=0,egret.Tween.get(h).to({alpha:1},200),egret.Tween.get(l).wait(200).to({alpha:1},200),egret.Tween.get(o).wait(400).to({alpha:1},200),egret.Tween.get(r).wait(600).to({alpha:1},200),egret.Tween.get(b).wait(200).to({alpha:1},200),egret.Tween.get(m).wait(400).to({alpha:1},200),egret.Tween.get(d).wait(600).to({alpha:1},200),this.maskBg=new egret.Shape,this.maskBg.graphics.beginFill(0),this.maskBg.graphics.drawCircle(230,230,1),this.maskBg.graphics.endFill(),this.maskBg.x=StageUtils.stage.stageWidth-460>>1,this.maskBg.y=(StageUtils.stage.stageHeight-460>>1)+50,this.container.addChild(this.maskBg),this.bg1_1.mask=this.maskBg,this.angle=360,this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this);var c=AssetsUtils.createBitmapByName(i+"_png");StageUtils.centerInParent(c,this.bg.x,this.bg.y-240+s,this.bg),this.container.addChild(c);var _=AssetsUtils.createBitmapByName("content5_8_png");StageUtils.centerInParent(_,this.bg.x,this.bg.y-100+s,this.bg),this.container.addChild(_);var B=AssetsUtils.createBitmapByName("content5_9_png");StageUtils.centerInParent(B,this.bg.x,this.bg.y+140+s,this.bg),this.container.addChild(B);var u=AssetsUtils.createBitmapByName("content5_10_png");StageUtils.centerInParent(u,this.bg.x,this.bg.y+380+s,this.bg),this.container.addChild(u),_.alpha=0,B.alpha=0,u.alpha=0,this.icon8=_,this.icon9=B,this.icon10=u}},e.prototype.enterFrameHandler=function(){this.angle-=8;230*Math.cos(this.angle*Math.PI),230*Math.sin(this.angle*Math.PI);this.maskBg.graphics.clear(),this.maskBg.graphics.beginFill(16711680),this.maskBg.graphics.moveTo(230,230),this.maskBg.graphics.lineTo(460,230),this.maskBg.graphics.drawArc(230,230,230,0,this.angle*Math.PI/180,!0),this.maskBg.graphics.lineTo(230,230),this.maskBg.graphics.lineTo(0,230),this.maskBg.graphics.drawArc(230,230,230,(this.angle-180)*Math.PI/180,Math.PI,!1),this.maskBg.graphics.lineTo(230,230),this.maskBg.graphics.endFill(),this.angle<180&&this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),console.log(this.angle)},e.prototype.movePage=function(t){this.select=t,console.log(t)},e}(egret.DisplayObjectContainer);__reflect(ContentView.prototype,"ContentView");var ViewName;!function(t){t[t.None=0]="None",t[t.Loading=1]="Loading",t[t.Logo=2]="Logo",t[t.Main=3]="Main",t[t.Ball=4]="Ball",t[t.Content=5]="Content"}(ViewName||(ViewName={}));var GameScene=function(t){function e(){var i=t.call(this)||this;e.instance=i,i.container=new egret.DisplayObjectContainer,i.addChild(i.container);var s=new egret.DeviceOrientation;return s.addEventListener(egret.Event.CHANGE,i.onOrientation,i),s.start(),i.gamma=0,i.beta=0,i}return __extends(e,t),e.prototype.onOrientation=function(t){console.log(t.alpha,t.beta,t.gamma),this.sky&&(egret.Tween.removeTweens(this.sky),egret.Tween.get(this.sky).to({x:this.skyX+t.gamma,y:this.skyY+t.beta},100),this.gamma=t.gamma,this.beta=t.beta)},e.prototype.touchBegin=function(t){this.beginY=t.stageY,this.beginTime=egret.getTimer(),this.beginStageY=0,console.log("touchBegin:"+this.beginY)},e.prototype.touchMove=function(t){if(this.beginStageY){var e=t.stageY,i=e-this.beginStageY;this.container.y+=i}this.beginStageY=t.stageY},e.prototype.touchEnd=function(t){var e=t.stageY,i=egret.getTimer(),s=(e-this.beginY)/(i-this.beginTime);if(console.log("touchEnd:"+s,e,this.beginY,i,this.beginTime,this.curPage),Math.abs(s)<.3)this.moveEnd();else switch(this.curPage){case ViewName.Loading:s>0?this.moveEnd():(this.container.y=0,this.startGame(null));break;case ViewName.Logo:this.moveEnd();break;case ViewName.Main:s>0?(this.container.y=0,this.hideMain(),this.showLoading(),this.loadingView.setComplete()):this.moveEnd();break;case ViewName.Ball:s>0?(this.container.y=0,this.hideBall(),this.showMain()):(this.container.y=0,this.showContent(this.ballView.index));break;case ViewName.Content:s>0?0==this.contentView.select?(this.container.y=0,this.showBall(this.contentView.index),this.hideContent()):(this.moveEnd(),this.contentView.movePage(0)):0==this.contentView.select?4==this.contentView.index?(this.moveEnd(),this.contentView.movePage(0)):(this.moveEnd(-1059),this.contentView.movePage(1)):this.moveEnd(-1059)}},e.prototype.moveEnd=function(t){void 0===t&&(t=0),egret.Tween.get(this.container).to({y:t},500,egret.Ease.circOut)},e.prototype.intoContent=function(t){var e=t.data;this.showContent(e)},e.prototype.ballClick=function(t){this.hideMain();var e=t.data;this.showBall(e),GameDispatcher.instance.addEventListener(EventName.Into_Content,this.intoContent,this)},e.prototype.startGame=function(t){this.hideLoading(),this.showLogo()},e.prototype.logoEnd=function(t){console.log("logoEnd"),this.hideLogo(),this.showMain()},e.prototype.showContent=function(t){this.ballView&&this.hideBall(),this.contentView=new ContentView,this.container.addChild(this.contentView),this.contentView.setData(t),this.curPage=ViewName.Content},e.prototype.hideContent=function(){this.container.removeChild(this.contentView),this.contentView=null},e.prototype.showBall=function(t){console.log("ball"),this.curPage=ViewName.Ball,this.ballView=new BallView,this.container.addChild(this.ballView),this.ballView.initView(t)},e.prototype.hideBall=function(){this.container.removeChild(this.ballView),this.ballView=null},e.prototype.showMain=function(){console.log("main"),this.curPage=ViewName.Main,this.mainView=new MainView,this.container.addChild(this.mainView),GameDispatcher.instance.addEventListener(EventName.Ball_Click,this.ballClick,this)},e.prototype.hideMain=function(){this.container.removeChild(this.mainView),this.mainView=null},e.prototype.showLogo=function(){GameDispatcher.instance.addEventListener(EventName.Logo_End,this.logoEnd,this),this.logoView=new LogoView,this.container.addChild(this.logoView),this.curPage=ViewName.Logo},e.prototype.hideLogo=function(){this.container.removeChild(this.logoView),this.logoView=null,GameDispatcher.instance.removeEventListener(EventName.Logo_End,this.logoEnd,this)},e.prototype.showLoading=function(){this.loadingView=new LoadingView,this.container.addChild(this.loadingView),GameDispatcher.instance.addEventListener(EventName.Start_Game,this.startGame,this),this.curPage=ViewName.Loading},e.prototype.hideLoading=function(){this.container.removeChild(this.loadingView),this.loadingView=null,GameDispatcher.instance.removeEventListener(EventName.Start_Game,this.startGame,this)},e.prototype.setProgress=function(t,e){this.loadingView.setProgress(t,e)},e.prototype.setComplete=function(){this.loadingView.setComplete()},e.prototype.showBG=function(){this.sky=AssetsUtils.createBitmapByName("bg_jpg"),this.addChildAt(this.sky,0),this.sky.x=this.stage.stageWidth-this.sky.width>>1,this.sky.y=this.stage.stageHeight-this.sky.height>>1,this.skyX=this.sky.x,this.skyY=this.sky.y,console.log(window.innerWidth,this.stage.stageWidth,window.innerHeight,this.stage.stageHeight)},e.prototype.refreshBg=function(){this.sky.x,this.sky.y;this.sky.x=(this.stage.stageWidth-this.sky.width>>1)+this.gamma,this.sky.y=(this.stage.stageHeight-this.sky.height>>1)+this.beta,this.skyX=this.sky.x,this.skyY=this.sky.y},e}(egret.DisplayObjectContainer);__reflect(GameScene.prototype,"GameScene");var LoadingView=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){},e.prototype.setProgress=function(t,e){},e.prototype.setComplete=function(){console.log("setComplete"),this.txt1=AssetsUtils.createBitmapByName("p1_title_png"),StageUtils.centerInParentX(this.txt1),this.txt1.y=StageUtils.CH-240,this.addChild(this.txt1),this.quan=AssetsUtils.createBitmapByName("p1_but_png"),StageUtils.centerInParentX(this.quan),this.quan.y=StageUtils.CH+200,this.addChild(this.quan),this.quan.touchEnabled=!0,this.quan.addEventListener(egret.TouchEvent.TOUCH_END,this.quanClickHandler,this),this.txt2=AssetsUtils.createBitmapByName("p1_tip_png"),StageUtils.centerInParentX(this.txt2),this.txt2.y=StageUtils.CH+360,this.addChild(this.txt2),this.showFlash()},e.prototype.showFlash=function(){this.txt1.y=StageUtils.CH-240,this.txt1.alpha=0,egret.Tween.get(this.txt1).to({y:this.txt1.y+20,alpha:1},300),this.quan.y=StageUtils.CH+200,this.quan.alpha=0,egret.Tween.get(this.quan).wait(150).to({y:this.quan.y+20,alpha:1},300),this.txt2.y=StageUtils.CH+360,this.txt2.alpha=0,egret.Tween.get(this.txt2).wait(300).to({y:this.txt2.y+20,alpha:1},300)},e.prototype.quanClickHandler=function(t){if(Main.loaded_music){var e=RES.getRes("loading_click_mp3");e.play(.8,1)}GameDispatcher.instance.dispatchEventWith(EventName.Start_Game)},e}(egret.Sprite);__reflect(LoadingView.prototype,"LoadingView");var LogoView=function(t){function e(){var e=t.call(this)||this;return e.initView(),e}return __extends(e,t),e.prototype.initView=function(){this.img1=AssetsUtils.createBitmapByName("p2_yuan_png"),StageUtils.centerInParent(this.img1),this.addChild(this.img1),this.maskBg=new egret.Shape,this.maskBg.graphics.beginFill(0),this.maskBg.graphics.drawCircle(230,230,1),this.maskBg.graphics.endFill(),this.maskBg.x=StageUtils.stage.stageWidth-460>>1,this.maskBg.y=StageUtils.stage.stageHeight-460>>1,this.addChild(this.maskBg),this.img1.mask=this.maskBg,this.img2=AssetsUtils.createBitmapByName("logo_png"),StageUtils.centerInParent(this.img2),this.img2.y-=50,this.addChild(this.img2),this.img3=AssetsUtils.createBitmapByName("ls_logo_png"),StageUtils.centerInParent(this.img3),this.img3.y-=140,this.addChild(this.img3),this.img4=AssetsUtils.createBitmapByName("p2_en_png"),StageUtils.centerInParent(this.img4),this.img4.y+=80,this.addChild(this.img4),this.showFlash()},e.prototype.showFlash=function(){this.img1.alpha=0,egret.Tween.get(this.img1).to({alpha:1},500),this.img2.alpha=0,egret.Tween.get(this.img2).wait(350).to({alpha:1},500),this.img3.alpha=0,egret.Tween.get(this.img3).wait(550).to({alpha:1},500),this.img4.alpha=0,egret.Tween.get(this.img4).wait(750).to({alpha:1},500),egret.Tween.get(this).wait(2e3).to({alpha:0},800).call(this.onComplete,this),this.angle=360,this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},e.prototype.enterFrameHandler=function(){this.angle-=8;230*Math.cos(this.angle*Math.PI),230*Math.sin(this.angle*Math.PI);this.maskBg.graphics.clear(),this.maskBg.graphics.beginFill(16711680),this.maskBg.graphics.moveTo(230,230),this.maskBg.graphics.lineTo(460,230),this.maskBg.graphics.drawArc(230,230,230,0,this.angle*Math.PI/180,!0),this.maskBg.graphics.lineTo(230,230),this.maskBg.graphics.lineTo(0,230),this.maskBg.graphics.drawArc(230,230,230,(this.angle-180)*Math.PI/180,Math.PI,!1),this.maskBg.graphics.lineTo(230,230),this.maskBg.graphics.endFill(),this.angle<180&&this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),console.log(this.angle)},e.prototype.onComplete=function(){console.log("onComplete"),GameDispatcher.instance.dispatchEventWith(EventName.Logo_End)},e}(egret.DisplayObjectContainer);__reflect(LogoView.prototype,"LogoView");var MainView=function(t){function e(){var e=t.call(this)||this;return e.initView(),e}return __extends(e,t),e.prototype.initView=function(){this.img1=AssetsUtils.createBitmapByName("p3_title_png"),StageUtils.centerInParent(this.img1),this.img1.y-=400,this.addChild(this.img1),this.img2=AssetsUtils.createBitmapByName("org_png"),StageUtils.centerInParent(this.img2),this.img2.x+=270,this.img2.y-=460,this.addChild(this.img2),this.img3=AssetsUtils.createBitmapByName("p3_kuang_png"),StageUtils.centerInParent(this.img3),this.img3.y+=30,this.addChild(this.img3);var t=AssetsUtils.createBitmapByName("llogo_png");t.scaleX=t.scaleY=.8,StageUtils.centerInParent(t,30,0),this.addChild(t),this.ball1=AssetsUtils.createBitmapByName("ball1_png"),StageUtils.centerInParent(this.ball1,-24,-58),this.ball2=AssetsUtils.createBitmapByName("ball2_png"),StageUtils.centerInParent(this.ball2,224,-58),this.ball3=AssetsUtils.createBitmapByName("ball3_png"),StageUtils.centerInParent(this.ball3,300,176),this.ball4=AssetsUtils.createBitmapByName("ball4_png"),StageUtils.centerInParent(this.ball4,100,327),this.ball5=AssetsUtils.createBitmapByName("ball5_png"),StageUtils.centerInParent(this.ball5,-100,176);
var e=AssetsUtils.createBitmapByName("ball_bg4_png");e.x=this.ball1.x-122,e.y=this.ball1.y-116,this.addChild(e);var i=AssetsUtils.createBitmapByName("ball_bg4_png");i.x=this.ball2.x-122,i.y=this.ball2.y-116,this.addChild(i);var s=AssetsUtils.createBitmapByName("ball_bg4_png");s.x=this.ball3.x-122,s.y=this.ball3.y-116,this.addChild(s);var a=AssetsUtils.createBitmapByName("ball_bg4_png");a.x=this.ball4.x-122,a.y=this.ball4.y-116,this.addChild(a);var n=AssetsUtils.createBitmapByName("ball_bg4_png");n.x=this.ball5.x-122,n.y=this.ball5.y-116,this.addChild(n),this.addChild(this.ball1),this.addChild(this.ball2),this.addChild(this.ball3),this.addChild(this.ball4),this.addChild(this.ball5),this.selectBg1=AssetsUtils.createBitmapByName("ball_bg2_png"),this.selectBg1.x=this.ball1.x-140,this.selectBg1.y=this.ball1.y-145,this.selectBg1.scaleX=this.selectBg1.scaleY=.58,this.addChild(this.selectBg1),this.selectBg2=AssetsUtils.createBitmapByName("ball_bg3_png"),this.selectBg2.x=this.ball1.x-140,this.selectBg2.y=this.ball1.y-145,this.selectBg2.scaleX=this.selectBg2.scaleY=.58,this.addChild(this.selectBg2),this.selectBg1.visible=!1,this.selectBg2.visible=!1,this.txt1=AssetsUtils.createBitmapByName("p3_c1_png"),StageUtils.centerInParent(this.txt1,-124,-310),this.addChild(this.txt1),this.txt2=AssetsUtils.createBitmapByName("p3_c2_png"),StageUtils.centerInParent(this.txt2,124,-310),this.addChild(this.txt2),this.txt3=AssetsUtils.createBitmapByName("p3_c3_png"),StageUtils.centerInParent(this.txt3,200,210),this.addChild(this.txt3),this.txt4=AssetsUtils.createBitmapByName("p3_c4_png"),StageUtils.centerInParent(this.txt4,0,360),this.addChild(this.txt4),this.txt5=AssetsUtils.createBitmapByName("p3_c5_png"),StageUtils.centerInParent(this.txt5,-200,210),this.addChild(this.txt5),this.showFlash(),this.ball1.touchEnabled=!0,this.ball2.touchEnabled=!0,this.ball3.touchEnabled=!0,this.ball4.touchEnabled=!0,this.ball5.touchEnabled=!0,this.ball1.addEventListener(egret.TouchEvent.TOUCH_END,this.ballClick,this),this.ball2.addEventListener(egret.TouchEvent.TOUCH_END,this.ballClick,this),this.ball3.addEventListener(egret.TouchEvent.TOUCH_END,this.ballClick,this),this.ball4.addEventListener(egret.TouchEvent.TOUCH_END,this.ballClick,this),this.ball5.addEventListener(egret.TouchEvent.TOUCH_END,this.ballClick,this)},e.prototype.ballClick=function(t){var e=0;if(this.ball1==t.currentTarget?e=1:this.ball2==t.currentTarget?e=2:this.ball3==t.currentTarget?e=3:this.ball4==t.currentTarget?e=4:this.ball5==t.currentTarget&&(e=5),this.selectBg1.x=this["ball"+e].x-140,this.selectBg1.y=this["ball"+e].y-145,this.selectBg2.x=this["ball"+e].x-140,this.selectBg2.y=this["ball"+e].y-145,this.selectBg1.visible=!0,this.selectBg2.visible=!0,GameDispatcher.instance.dispatchEventWith(EventName.Ball_Click,!1,e),Main.loaded_music){var i=RES.getRes("loading_click_mp3");i.play(.5,1)}},e.prototype.showFlash=function(){this.ball1.anchorOffsetX=110,this.ball1.anchorOffsetY=110,this.ball1.alpha=0,this.ball1.scaleX=this.ball1.scaleY=.8,egret.Tween.get(this.ball1).to({alpha:1,scaleX:1,scaleY:1},300),this.ball2.anchorOffsetX=110,this.ball2.anchorOffsetY=110,this.ball2.alpha=0,this.ball2.scaleX=this.ball2.scaleY=.8,egret.Tween.get(this.ball2).wait(200).to({alpha:1,scaleX:1,scaleY:1},300),this.ball3.anchorOffsetX=110,this.ball3.anchorOffsetY=110,this.ball3.alpha=0,this.ball3.scaleX=this.ball3.scaleY=.8,egret.Tween.get(this.ball3).wait(400).to({alpha:1,scaleX:1,scaleY:1},300),this.ball4.anchorOffsetX=110,this.ball4.anchorOffsetY=110,this.ball4.alpha=0,this.ball4.scaleX=this.ball4.scaleY=.8,egret.Tween.get(this.ball4).wait(600).to({alpha:1,scaleX:1,scaleY:1},300),this.ball5.anchorOffsetX=110,this.ball5.anchorOffsetY=110,this.ball5.alpha=0,this.ball5.scaleX=this.ball5.scaleY=.8,egret.Tween.get(this.ball5).wait(800).to({alpha:1,scaleX:1,scaleY:1},300)},e}(egret.DisplayObjectContainer);__reflect(MainView.prototype,"MainView");