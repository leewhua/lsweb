var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},PopView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){var t=new egret.Shape;t.graphics.beginFill(0,.9),t.graphics.drawRect(0,0,StageUtils.stage.stageWidth,StageUtils.stage.stageHeight),t.graphics.endFill(),this.addChildAt(t,0),t.alpha=0,Global.fadeIn(t),UIManager.instance.popLayer.addChild(this),this.touchEnabled=!0},e.prototype.hide=function(){UIManager.instance.popLayer.removeChild(this)},e.prototype.setData=function(t){void 0===t&&(t=null),this.data=t},e}(egret.DisplayObjectContainer);__reflect(PopView.prototype,"PopView");var GameBaseView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initDanmuSend=function(){var t=new DanmuSendView;this.addChild(t),t.addEventListener("add_self",this.addSelfHandler,this)},e.prototype.addSelfHandler=function(t){var e=t.data;e&&this.danmuList&&this.danmuList.addSelf(e)},e.prototype.initDanmuList=function(){this.danmuList=new DanmuListView,this.danmuList.setData(Main.content),this.addChild(this.danmuList)},e.prototype.play=function(){if(Main.isGet)UIManager.instance.initShareView();else{$.ajax({url:sessionStorage.getItem("interface"),data:{ticket:sessionStorage.getItem("luckticket")},success:function(t){"success"==t.result?t.prizes.length>0?"0"==t.prizes[0].value?(Main.share(!0),PopManager.showPop("SharePop",1)):(Main.share(!0),PopManager.showPop("EndPop",t.prizes[0].value),(t.prizes[0].value="66600")&&sessionStorage.setItem("confirmticket",t.prizes[0].ticket)):PopManager.showPop("SharePop",1):PopManager.showPop("ErrorPop",2)},error:function(){},timeout:8e3,dataType:"json",async:!0,type:"POST",complete:function(t,e){}})}},e.prototype.result=function(t){var e=t.more.c1ashed;e?(Main.share(!0),PopManager.showPop("EndPop",e)):PopManager.showPop("SharePop",1)},e}(egret.DisplayObjectContainer);__reflect(GameBaseView.prototype,"GameBaseView");var DanmuItemView=function(t){function e(){var e=t.call(this)||this;return e.isAdd=!1,e.isPlay=!1,e}return __extends(e,t),e.prototype.setData=function(t){if(this.obj=t,t)if(0==t.type){this.w=526;var e=new CustomImage("resource/assets/danmu/img/danmu_txt_"+t.content+".png");this.addChild(e)}else if(1==t.type)this.setInfo(t);else if(2==t.type){this.w=532;var i=this.obj.content>4?this.obj.content-4:this.obj.content,e=new CustomImage("resource/assets/danmu/img/danmu_audio_"+i+".png");this.addChild(e),this.img1=Global.createBitmapByName("sound_no_png"),this.img1.x=354,this.img1.y=53,this.addChild(this.img1),Global.setBut(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.img1Handler,this)}},e.prototype.img1Handler=function(){this.obj&&(this.isPlay?this.stop():(this.img1.texture=RES.getRes("sound_1_png"),this.img1.x=354,this.img1.y=72,this.img2=Global.createBitmapByName("sound_2_png"),this.img2.x=365,this.img2.y=63,this.addChild(this.img2),this.img2.alpha=0,this.img3=Global.createBitmapByName("sound_3_png"),this.img3.x=372,this.img3.y=53,this.addChild(this.img3),this.img3.alpha=0,console.log("addTween"),egret.Tween.get(this.img2,{loop:!0}).wait(500).to({alpha:1},100).wait(1e3).to({alpha:0},100),egret.Tween.get(this.img3,{loop:!0}).wait(1e3).to({alpha:1},100).wait(500).to({alpha:0},100),this.startLoad(this.obj.content)))},e.prototype.startLoad=function(t){this.isPlay||(this.isPlay=!0,this.sound=RES.getRes("sound_"+t+"_mp3"),this.channel=this.sound.play(0,1),this.channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this))},e.prototype.onSoundComplete=function(t){egret.log("onSoundComplete"),this.stop()},e.prototype.stop=function(){console.log("stop"),this.img1.texture=RES.getRes("sound_no_png"),this.img1.x=354,this.img1.y=53,console.log("removeTween"),egret.Tween.removeTweens(this.img2),this.img2.alpha=0,egret.Tween.removeTweens(this.img3),this.img3.alpha=0,this.isPlay=!1,this.channel&&(this.channel.stop(),this.channel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this.channel=null),this.sound=null},e.prototype.setInfo=function(t){var e=this,i=Global.createBitmapByName("danmu_bg1_png");this.addChild(i);var n=new CustomImage(t.headimgurl,!1,function(){n.width=80,n.height=80,n.x=21,n.y=21;var t=new egret.Shape;t.graphics.beginFill(0),t.graphics.drawCircle(40,40,40),t.x=n.x,t.y=n.y,n.mask=t,e.addChild(n),e.addChild(t)});this.addChild(n);var o=new egret.TextField;o.x=110,o.y=21,o.size=25,o.textColor=8486526,this.addChild(o);var a=decodeURI(t.nickname);o.text=a;var r=new egret.TextField;r.x=115,r.y=60,this.addChild(r),r.text=decodeURI(t.content),t.self||a==Main.username?r.textColor=32511:r.textColor=3815994;var s=r.textWidth+140;300>s&&(s=300),i.width=s,this.w=s},e}(egret.DisplayObjectContainer);__reflect(DanmuItemView.prototype,"DanmuItemView");var CustomTabbar=function(t){function e(e,i,n){for(var o=t.call(this)||this,a=0;e>a;a++){var r=Global.createBitmapByName("tabbar_"+(a+1)+"_2_png");r.x=295,r.y=115,o.addChild(r)}return o}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(CustomTabbar.prototype,"CustomTabbar");var Message=function(t){function e(){var e=t.call(this)||this;return e.bg=Global.createBitmapByName("message_bg_png"),e.bg.y=-10,e.addChild(e.bg),e.txtStr=new egret.TextField,e.txtStr.width=StageUtils.SW,e.txtStr.textAlign=egret.HorizontalAlign.CENTER,e.addChild(e.txtStr),e}return __extends(e,t),e.prototype.show=function(t){this.txtStr.text=t,this.bg.width=this.txtStr.textWidth+50,this.bg.height=this.txtStr.textHeight+20,this.bg.x=StageUtils.SW-this.bg.width>>1,this.y=StageUtils.SH>>1,this.alpha=1,egret.Tween.get(this).wait(1e3).to({y:this.y-100,alpha:0},1e3,egret.Ease.quadIn).call(this.tweenEnd,this)},e.prototype.tweenEnd=function(){this.parent&&(this.parent.removeChild(this),e.pool.push(this))},e.show=function(t){var i;i=e.pool.length>0?e.pool.pop():new e,i&&(i.show(t),UIManager.instance.popLayer.addChild(i))},e}(egret.DisplayObjectContainer);Message.pool=[],__reflect(Message.prototype,"Message");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.index=3,e.loadOk=!1,e.lastOk=!1,e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.lastOk=!0;var t=new CustomImage("resource/assets/loading/loading_bg.jpg",!0,function(){t.width=StageUtils.SW,t.height=StageUtils.SH});this.addChild(t);var e=Global.createBitmapByName("loading_bar_bg_png");e.x=StageUtils.SW-e.width>>1,e.y=StageUtils.SH-80,this.addChild(e),this.bar=Global.createBitmapByName("loading_bar_png"),this.bar.x=StageUtils.SW-this.bar.width>>1,this.bar.y=e.y-2,this.addChild(this.bar),this.txtPro=new egret.TextField,this.txtPro.size=20,this.txtPro.width=100,this.txtPro.textAlign=egret.HorizontalAlign.CENTER,this.txtPro.x=StageUtils.SW-this.txtPro.width>>1,this.txtPro.y=e.y+20,this.addChild(this.txtPro),this.txtPro.text="0%",this.bar.width=0},e.prototype.timerHandler=function(){this.index--,this.index>0?(this.txtLasttime.text="跳过 "+this.index+"S",this.txtLasttime.mask=this.rectMask,this.txtLasttime1.text="跳过 "+this.index+"S"):(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerHandler,this),this.timer=null,this.txtLasttime.text="跳  过",this.txtLasttime.mask=this.rectMask,this.txtLasttime1.text="跳  过",this.lastOk=!0,this.checkInto())},e.prototype.checkInto=function(){this.loadOk&&this.lastOk&&(this.btnReturn&&(Global.setBut(this.btnReturn),this.btnReturn.touchEnabled=!0,this.btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.returnClickHandler,this)),this.returnClickHandler())},e.prototype.returnClickHandler=function(){UIManager.instance.initMainView(),UIManager.instance.mainUILayer.removeChild(this)},e.prototype.setProgress=function(t,e){var i=t/e;this.bar.width=323*i,this.txtPro.text=Math.floor(100*i)+"%"},e.prototype.loadComp=function(){window.sessionStorage.setItem("loading_load","1"),console.log("loadComp"),this.loadOk=!0,this.checkInto()},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(_super){function Main(){var t=_super.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(Main,_super),Object.defineProperty(Main,"USER_INFO_API",{get:function(){return Main.ROOT+"info?"+Math.random()},enumerable:!0,configurable:!0}),Object.defineProperty(Main,"PLAY_API",{get:function(){return Main.ROOT+"play?"+Math.random()},enumerable:!0,configurable:!0}),Main.prototype.onAddToStage=function(t){Main.instance=this,StageUtils.registStage(this.stage),this.addChild(UIManager.instance),this.loadData()},Main.prototype.getData=function(){var t=window.location.href.split("#")[0].split("?")[1];return-1!=t.indexOf("$share")?(Main.IS_SHARE=!0,Main.type=parseInt(t.substr(t.indexOf("$share")+6)),Main.username=decodeURI(t.substr(0,t.indexOf("$share")))):(sessionStorage.setItem("interface","http://coeasion.cn/"),sessionStorage.setItem("mainticket",t.substr(0,32))),!0},Main.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading")},Main.prototype.onResourceLoadComplete=function(t){console.log(t.groupName),"loading"==t.groupName?(this.loadingView=new LoadingUI,UIManager.instance.mainUILayer.addChild(this.loadingView),Main.IS_SHARE?RES.loadGroup("share"):RES.loadGroup("danmu")):"danmu"==t.groupName?RES.loadGroup("game"+Main.type):"game1"==t.groupName||"game2"==t.groupName||"game3"==t.groupName?(this.loadingView.loadComp(),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)):"share"==t.groupName&&(this.loadingView.loadComp(),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this))},Main.prototype.onItemLoadError=function(t){Message.show("Url:"+t.resItem.url+" has failed to load")},Main.prototype.onResourceLoadError=function(t){Message.show("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},Main.prototype.onResourceProgress=function(t){("danmu"==t.groupName||"game1"==t.groupName||"game2"==t.groupName||"game3"==t.groupName||"share"==t.groupName)&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},Main.prototype.loadData=function(){if(this.getData())if(Main.IS_SHARE)Main.share(),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/");else{var t,e=this;$.ajax({url:sessionStorage.getItem("interface"),data:{actiontype:"info",ticket:sessionStorage.getItem("mainticket")},success:function(i){if(void 0!=i.reason&&-1!=i.reason.indexOf("limit"))return void PopManager.showPop("ErrorPop",4);if("success"!=i.result)return void PopManager.showPop("ErrorPop",2);if(Main.username=decodeURI(i.nickname),Main.headurl=i.headimgurl,i.prizes.length>0)if("66600"==i.prizes[0].value&&0==i.prizes[0].require.indexOf("ADDR"))Main.step="cashed",sessionStorage.setItem("addr","ADDR"),t=!1,sessionStorage.setItem("confirmticket0",i.prizes[0].ticket);else{Main.step="filled";var n=i.prizes[0].require.split("#")[0];sessionStorage.setItem("addr",n),t=!0,sessionStorage.setItem("confirmticket2",i.prizes[0].ticket)}i.pools.length>0&&"game"==i.pools[0].type&&(sessionStorage.setItem("gameticket",i.pools[0].ticket),$.ajax({url:sessionStorage.getItem("interface"),data:{actiontype:"info",ticket:sessionStorage.getItem("gameticket")},success:function(i){if(e.loadRes(),"success"!=i.result)return void PopManager.showPop("ErrorPop",2);if(void 0==i.pools&&1==i.prizes.length)return t?void PopManager.showPop("InputPop"):void PopManager.showPop("ErrorPop",1);if(i.prizes.length>1)for(var n=0;n<i.prizes.length;n++)"game"==i.prizes[n].pooltype?"game0"==i.prizes[n].desc?Main.type=1:"game1"==i.prizes[n].desc?Main.type=2:Main.type=3:sessionStorage.setItem("confirmticket",i.prizes[n].ticket);else void 0!=i.pools&&i.pools.length>0||void 0!=i.prizes&&i.prizes.length>0?(void 0!=i.prizes&&i.prizes.length>0&&("game0"==i.prizes[0].desc?Main.type=1:"game1"==i.prizes[0].desc?Main.type=2:Main.type=3),void 0!=i.pools&&i.pools.length>0?sessionStorage.setItem("luckticket",i.pools[0].ticket):t?PopManager.showPop("InputPop"):PopManager.showPop("InfoPop")):PopManager.showPop("ErrorPop",1)},error:function(){},timeout:8e3,dataType:"json",async:!0,type:"POST",complete:function(t,e){}}))},error:function(){},timeout:8e3,dataType:"json",async:!0,type:"POST",complete:function(t,e){}})}else PopManager.showPop("ErrorPop",2)},Main.prototype.loadRes=function(){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},Main.share=function(isEnd){var _this=this;void 0===isEnd&&(isEnd=!1);var str1="码上有礼 新意加倍",str2;str2=isEnd?1==Main.type?Main.username+"亲吻屏幕赢得现金红包,快去看看！":2==Main.type?Main.username+"大笑三秒赢得现金红包，快去看看！":Main.username+"砸开椰子赢得现金红包，快去看看！":1==Main.type?"喝特种兵亲吻屏幕能赢红包，最高666元，快去看看":2==Main.type?"喝特种兵大笑三秒能赢红包，最高666元，快去看看":"喝特种兵砸椰子能赢红包，最高666元，快去看看";var url=window.location.href.split("#")[0].split("?")[0];if(url="http://res.leasiondata.cn/lstatic/t1v2/index.html?test$share1",eval("$.wxIsReady")){var weixin=eval("wx;");weixin&&(weixin.onMenuShareTimeline({title:"【"+str1+"】"+str2,link:url,imgUrl:"http://res.leasiondata.cn/lstatic/t1v2/share/share.jpg",success:function(){},cancel:function(){}}),weixin.onMenuShareAppMessage({title:str1,desc:str2,link:url,imgUrl:"http://res.leasiondata.cn/lstatic/t1v2/share/share.jpg",success:function(){},cancel:function(){}}))}else setTimeout(function(){_this.share()},100)},Main}(egret.DisplayObjectContainer);Main.isTest=!1,Main.type=2,Main.isGet=!1,Main.step="",Main.content=[{nickname:"",headimgurl:"",content:"1",type:"2"},{nickname:"",headimgurl:"",content:"2",type:"2"},{nickname:"",headimgurl:"",content:"3",type:"2"},{nickname:"",headimgurl:"",content:"4",type:"2"},{nickname:"",headimgurl:"",content:"5",type:"2"},{nickname:"",headimgurl:"",content:"6",type:"2"},{nickname:"",headimgurl:"",content:"7",type:"2"},{nickname:"",headimgurl:"",content:"8",type:"2"}],Main.ROOT="http://leasiondata.cn/",Main.INFO_TICKET="",Main.PLAY_TICKET="",Main.IS_SHARE=!1,__reflect(Main.prototype,"Main");var PopManager=function(){function PopManager(){}return PopManager.showPop=function(pop,data){void 0===data&&(data=null);var view=PopManager.popDic[pop];view?view.setData(data):(view=eval("new "+pop+"();"),view&&view.setData(data),PopManager.popDic[pop]=view),view.show()},PopManager.hidePop=function(t){var e=PopManager.popDic[t];e?(e.hide(),delete PopManager.popDic[t]):console.log(t+":不存在")},PopManager}();PopManager.popDic={},__reflect(PopManager.prototype,"PopManager");var CustomCheckBox=function(t){function e(e,i,n){void 0===n&&(n=0);var o=t.call(this)||this;return o.type=e,o.text=i,o.select=n,o.init(),o}return __extends(e,t),e.prototype.init=function(){console.log(),this.icon=Global.createBitmapByName("cbx_"+this.type+"_"+this.select+"_png"),this.addChild(this.icon),this.txtContent=new egret.TextField,this.txtContent.x=50,this.txtContent.text=this.text,this.addChild(this.txtContent),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this)},e.prototype.clickHandler=function(){this.change(),this.dispatchEventWith(egret.Event.CHANGE)},e.prototype.setSelect=function(t){this.select=t,this.icon.texture=RES.getRes("cbx_"+this.type+"_"+this.select+"_png")},e.prototype.change=function(){this.setSelect(0==this.select?1:0)},e}(egret.DisplayObjectContainer);__reflect(CustomCheckBox.prototype,"CustomCheckBox");var UIManager=function(t){function e(){var e=t.call(this)||this;return e.initLayer(),e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.initLayer=function(){this.mainUILayer=new egret.DisplayObjectContainer,this.addChild(this.mainUILayer),this.popLayer=new egret.DisplayObjectContainer,this.addChild(this.popLayer),this.topLayer=new egret.DisplayObjectContainer,this.addChild(this.topLayer)},e.prototype.initMainView=function(){Main.IS_SHARE?this.mainUILayer.addChild(new ShareView):1==Main.type?(this.game=new Game1,this.mainUILayer.addChild(this.game)):2==Main.type?(this.game=new Game2,this.mainUILayer.addChild(this.game)):(this.game=new Game3,this.mainUILayer.addChild(this.game)),"filled"==Main.step?(PopManager.showPop("InputPop"),console.log("input")):"cashed"==Main.step&&PopManager.showPop("InfoPop")},e.prototype.initShareView=function(){this.game&&(this.mainUILayer.removeChild(this.game),this.game=null),this.mainUILayer.addChild(new ShareView)},e}(egret.DisplayObjectContainer);__reflect(UIManager.prototype,"UIManager");var CountData=function(){function t(){this.lastTime=0}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(t,e){this.ticket=e,t&&(t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginHandler,this),t.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveHandler,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.endHandler,this),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.endHandler,this))},t.prototype.beginHandler=function(t){console.log("beginHandler"),this.isMove=!1,this.startX=t.stageX,this.startY=t.stageY},t.prototype.moveHandler=function(t){console.log("moveHandler"),this.isMove=!0},t.prototype.endHandler=function(t){console.log("endHandler");var e,i=t.stageX,n=t.stageY;if(this.isMove){var o=i-this.startX,a=n-this.startY;e=Math.abs(o)>Math.abs(a)?o>0?"right":"left":a>0?"down":"up",console.log("move:"+e)}else e="clilck",console.log("click");var r=egret.getTimer();if(!(r-this.lastTime<200)){this.lastTime=r;$.ajax({url:"http://123.59.156.230/lstat",data:{from:"H5",url:window.location.href,px:i,py:n,operation:e,ticket:this.ticket},success:function(t){},error:function(){console.log("error")},timeout:8e3,dataType:"json",async:!0,type:"POST",complete:function(t,e){"timeout"==e&&console.log("timeout")}})}},t}();__reflect(CountData.prototype,"CountData");var ErrorCode=function(){function t(){}return t}();ErrorCode.TIME_OUT=999,ErrorCode.NOT_FOUND=404,ErrorCode.SYSTEM_ERROR=100,ErrorCode.TICKET_TIME_OUT=1,ErrorCode.RECEIVED_SELF=2,ErrorCode.RECEIVED_OTHER=3,ErrorCode.RECEIVED_ERROR=4,__reflect(ErrorCode.prototype,"ErrorCode");var GameDispatcher=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}(egret.EventDispatcher);__reflect(GameDispatcher.prototype,"GameDispatcher");var Global=function(){function t(){}return t.createBitmapByRes=function(t,e){var i=new egret.Bitmap,n=RES.getRes(t);return console.log("name::"+e+"::"+t),i.texture=n.getTexture(e),i},t.createBitmapByName=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=new egret.Bitmap,o=RES.getRes(t);return n.texture=o,n.x=e,n.y=i,n},t.fadeIn=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=500),void 0===o&&(o=1),t.tweenFrom(e,i,n,0,0,o,egret.Ease.cubicOut)},t.fadeOut=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=500),void 0===o&&(o=1),t.tweenToHide(e,i,n,0,0,o,egret.Ease.cubicOut)},t.zoomIn=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=500),void 0===o&&(o=.6),t.tweenFrom(e,i,n,0,0,o,egret.Ease.backOut)},t.zoomOut=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=500),void 0===o&&(o=1.5),t.tweenToHide(e,i,n,0,0,o,egret.Ease.cubicIn)},t.tweenToHide=function(t,e,i,n,o,a,r,s){void 0===s&&(s=0);var h=egret.Tween.get(t),l=t.x,c=t.y;l+=n,c+=o,h.wait(e),h.to({alpha:s,scaleX:a,scaleY:a,x:l,y:c},i,r),h.call(function(){t.parent&&t.parent.removeChild(t)})},t.tweenTo=function(t,e,i,n,o,a,r,s){void 0===a&&(a=1),void 0===r&&(r=1),void 0===s&&(s=egret.Ease.cubicOut);var h=egret.Tween.get(t);h.wait(e),s?h.to({alpha:a,scaleX:r,scaleY:r,x:n,y:o},i,s):h.to({alpha:a,scaleX:r,scaleY:r,x:n,y:o},i)},t.tweenFrom=function(t,e,i,n,o,a,r){var s=egret.Tween.get(t),h=t.x,l=t.y;t.scaleX=t.scaleY=a,t.x=h+n,t.y=l+o,s.wait(e),s.to({alpha:1,scaleX:1,scaleY:1,x:h,y:l},i,r)},t.createMc=function(t,e,i){var n=RES.getRes(t),o=RES.getRes(e),a=new egret.MovieClipDataFactory(n,o),r=new egret.MovieClip(a.generateMovieClipData(i));return r},t.remove=function(t){t&&t.parent&&t.parent.removeChild(t)},t.setBut=function(t){t&&(t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){t.alpha=.68},t),t.addEventListener(egret.TouchEvent.TOUCH_END,function(){t.alpha=1},t),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,function(){t.alpha=1},t))},t.getArrayItems=function(t,e){var i=new Array;for(var n in t)i.push(t[n]);for(var o=new Array,a=0;e>a&&i.length>0;a++){var r=Math.floor(Math.random()*i.length);o[a]=i[r],i.splice(r,1)}return o},t.errorTips=function(t){t&&("invalidticket"==t.reason?PopManager.showPop("ErrorPop",ErrorCode.TICKET_TIME_OUT):"invalidticketparam"==t.reason?PopManager.showPop("ErrorPop",ErrorCode.NOT_FOUND):PopManager.showPop("ErrorPop",ErrorCode.SYSTEM_ERROR))},t.showTips=function(t){Message.show(t)},t}();Global.grayMatrix=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],Global.grayFlilter=[new egret.ColorMatrixFilter(Global.grayMatrix)],Global.grayFlilter1=[new egret.ColorMatrixFilter([.3,.6,0,0,200,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])],__reflect(Global.prototype,"Global");var StageUtils=function(){function t(){}return t.registStage=function(e){t.stage=e,t.SW=e.stageWidth,t.SH=e.stageHeight,t.CW=t.SW>>1,t.CH=t.SH>>1,t.LW=window.innerWidth,t.LH=window.innerHeight},t.centerInParentX=function(e,i){void 0===i&&(i=null),e&&(i?e.x=i.width-e.width>>1:e.x=t.stage.stageWidth-e.width>>1)},t.centerInParentY=function(e,i){void 0===i&&(i=null),e&&(i?e.y=i.height-e.height>>1:e.y=t.stage.stageHeight-e.height>>1)},t.centerInParent=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=null),e&&(o?(e.x=(o.width-e.width>>1)+i,e.y=(o.height-e.height>>1)+n):(e.x=(t.stage.stageWidth-e.width>>1)+i,e.y=(t.stage.stageHeight-e.height>>1)+n))},t}();__reflect(StageUtils.prototype,"StageUtils");var CustomImage=function(t){function e(e,i,n){void 0===i&&(i=!0),void 0===n&&(n=null);var o=t.call(this)||this;return o.url=e,o.isEase=i,o.compFunc=n,o.loadBg(),o}return __extends(e,t),e.prototype.loadBg=function(){RES.getResByUrl(this.url,this.onLoadComplete,this,RES.ResourceItem.TYPE_IMAGE)},e.prototype.onLoadComplete=function(t){this.texture=t,this.isEase&&(this.alpha=0,egret.Tween.get(this).to({alpha:1},1e3)),this.compFunc&&this.compFunc()},e}(egret.Bitmap);__reflect(CustomImage.prototype,"CustomImage");var DanmuListView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(t){var e=this;this.list=t,t&&(this.showList=[],this.index=0,this.showLine(2==Main.type?530:580),setTimeout(function(){e.showLine(2==Main.type?390:720)},2500),this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this))},e.prototype.enterFrameHandler=function(){for(var t=this.showList.length,e=0;t>e;e++){var i=this.showList[e];i&&(i.x-=2,i.x<-i.w?(this.removeChild(i),i=null,this.showList.splice(e,1),e--,t--):i.x<StageUtils.SW-i.w-200&&(i.isAdd||(i.isAdd=!0,this.showLine(i.y))))}},e.prototype.showLine=function(t){this.index>=this.list.length&&(this.index=0);var e=this.list[this.index];if(e){var i=new DanmuItemView;i.setData(e),i.x=StageUtils.SW,i.y=t,this.addChild(i),this.showList.push(i)}this.index++},e.prototype.addSelf=function(t){this.list.splice(this.index,0,t)},e}(egret.DisplayObjectContainer);__reflect(DanmuListView.prototype,"DanmuListView");var DanmuSendView=function(t){function e(){var e=t.call(this)||this;e.danmu_text="弹幕发的好，出名能趁早!";var i=Global.createBitmapByName("danmu_bg_png");i.x=StageUtils.SW-i.width>>1,i.y=StageUtils.SH-i.height-20,e.addChild(i);var n=Global.createBitmapByName("danmu_line_png");n.x=130,n.y=955,egret.Tween.get(n,{loop:!0}).to({alpha:0},500).to({alpha:1},500);var o=Global.createBitmapByName("btn_send_png");return o.x=550,o.y=935,e.addChild(o),Global.setBut(o),o.addEventListener(egret.TouchEvent.TOUCH_TAP,e.sendHandler,e),e.setData(),e}return __extends(e,t),e.prototype.setData=function(){var t,e,i=this;Main.isTest?(t="http://wx.qlogo.cn/mmopen/6BD2qP9V7sout0oux0ts55Pns1xtEpOl7icGF5GV68YdruILNBBCJvMMFCy0Wbbl7zFiaibjfibaIlKFcYIhRM6ntCU37lhk8amY/0",e="有X的男女"):(t=Main.headurl,e=Main.username);var n=new CustomImage(t,!1,function(){n.width=80,n.height=80,n.x=35,n.y=920;var t=new egret.Shape;t.graphics.beginFill(0),t.graphics.drawCircle(40,40,40),t.x=n.x,t.y=n.y,n.mask=t,i.addChild(n),i.addChild(t)});this.addChild(n);var o=new egret.TextField;o.x=130,o.y=920,o.size=25,o.textColor=8486526,this.addChild(o),o.text=e,this.txtContent=new egret.TextField,this.txtContent.x=135,this.txtContent.y=958,this.txtContent.width=400,this.txtContent.type=egret.TextFieldType.INPUT,this.addChild(this.txtContent),this.txtContent.text=this.danmu_text,this.txtContent.textColor=8486526,this.txtContent.addEventListener(egret.FocusEvent.FOCUS_IN,this.focusInHandler,this),this.txtContent.addEventListener(egret.FocusEvent.FOCUS_OUT,this.focusOutHandler,this),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginHandler,this)},e.prototype.beginHandler=function(t){t.stopPropagation(),t.stopImmediatePropagation()},e.prototype.sendHandler=function(){var t=this.txtContent.text;if(t&&t!=this.danmu_text){var e=this;$.ajax({url:sessionStorage.getItem("interface"),data:{actiontype:"danmu",content:t,ticket:sessionStorage.getItem("mainticket")},success:function(t){"success"==t.result?(e.txtContent.text=e.danmu_text,e.txtContent.textColor=8486526,e.dispatchEventWith("add_self",!1,{nickname:Main.username,headimgurl:Main.headurl,content:t.more.content,type:1,self:1})):PopManager.showPop("ErrorPop",2)},error:function(){},timeout:8e3,dataType:"json",async:!0,type:"POST",complete:function(t,e){}})}},e.prototype.focusInHandler=function(){this.txtContent.text==this.danmu_text&&(this.txtContent.text="",this.txtContent.textColor=32511)},e.prototype.focusOutHandler=function(){""==this.txtContent.text&&(this.txtContent.text=this.danmu_text,this.txtContent.textColor=8486526)},e}(egret.DisplayObjectContainer);__reflect(DanmuSendView.prototype,"DanmuSendView");var EndPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(e){t.prototype.setData.call(this,e),this.container=new egret.DisplayObjectContainer,this.addChild(this.container);var i,n;66600==e?(i="resource/assets/asyn/game"+Main.type+"_result_bg1.png",n="btn_get_png"):(i="resource/assets/asyn/game"+Main.type+"_result_bg.png",n="btn_share_png");var o=new CustomImage(i,!0,function(){o.x=StageUtils.SW-o.width>>1,o.y=StageUtils.SH-o.height>>1});this.container.addChild(o);var a=Global.createBitmapByName(n);a.x=StageUtils.SW-a.width>>1,a.y=870,this.container.addChild(a),Global.setBut(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareHandler,this);var r=Global.createBitmapByName("money_"+e+"_png");r.x=212,r.y=538,this.container.addChild(r),2==Main.type?r.y=535:3==Main.type&&(r.y=558)},e.prototype.shareHandler=function(){if(66600==this.data)PopManager.hidePop("EndPop"),PopManager.showPop("InfoPop");else{this.container.removeChildren();var t=new CustomImage("resource/assets/asyn/get_ok.png",!0,function(){t.x=StageUtils.SW-t.width>>1,t.y=StageUtils.SH-t.height>>1});this.container.addChild(t);var e=Global.createBitmapByName("btn_share_friend_png");e.x=StageUtils.SW-e.width>>1,e.y=870,this.container.addChild(e),Global.setBut(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareHandler1,this)}},e.prototype.shareHandler1=function(){PopManager.hidePop("EndPop"),PopManager.showPop("SharePop")},e}(PopView);__reflect(EndPop.prototype,"EndPop");var ErrorPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(t){void 0===t&&(t=1);var e="";if(1==t){e="resource/assets/error/is_get.png";var i=new CustomImage("resource/assets/error/btn_game.png",!0,function(){i.x=StageUtils.SW-i.width>>1,i.y=(StageUtils.SH-i.height>>1)+60})}else 2==t?e="resource/assets/error/web_error.png":3==t?e="resource/assets/error/code_error.png":4==t&&(e="resource/assets/error/limit_error.png");var n=new CustomImage(e,!0,function(){n.x=StageUtils.SW-n.width>>1,n.y=StageUtils.SH-n.height>>1});this.addChild(n)},e.prototype.gameHandler=function(){PopManager.hidePop("ErrorPop"),Main.instance.loadRes()},e}(PopView);__reflect(ErrorPop.prototype,"ErrorPop");var Game1=function(t){function e(){var e=t.call(this)||this;e.touchList=[];var i=Global.createBitmapByName("game1_bg_png");i.x=StageUtils.SW-i.width>>1,i.y=StageUtils.SH-i.height>>1,e.addChild(i);var n=Global.createBitmapByName("game1_title_png");n.x=(StageUtils.SW-n.width>>1)+10,n.y=-n.height,e.addChild(n),egret.Tween.get(n).to({y:20},800,egret.Ease.backOut).call(function(){var t=Global.createBitmapByName("game1_lip_png");t.anchorOffsetX=t.width>>1,t.anchorOffsetY=t.height>>1,t.scaleX=t.scaleY=5,t.alpha=0,e.addChild(t),egret.Tween.get(t).to({alpha:1,scaleX:1,scaleY:1},1e3).call(function(){var t=Global.createBitmapByName("game1_tips_png");t.x=410,t.y=285,t.scaleX=0,egret.Tween.get(t).wait(300).to({scaleX:1},100).call(e.showHeart,e),egret.Tween.get(t,{loop:!0}).to({x:415},100).to({x:410},100),e.addChild(t)}).to({scaleX:1.2,scaleY:.2},300).to({scaleX:1,scaleY:1},100),t.x=20+t.width/2,t.y=260+t.height/2});var o=Global.createBitmapByName("btn_htlp_png");return o.x=25,o.y=StageUtils.SH-178,e.addChild(o),Global.setBut(o),o.addEventListener(egret.TouchEvent.TOUCH_TAP,e.helpTouchHandler,e),e.initDanmuSend(),e.initDanmuList(),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.touchBeginHandler,e),e.addEventListener(egret.TouchEvent.TOUCH_END,e.touchEndHandler,e),e.addEventListener(egret.TouchEvent.TOUCH_CANCEL,e.touchEndHandler,e),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,e.touchEndHandler,e),e}return __extends(e,t),e.prototype.showHeart=function(){var t=Global.createBitmapByName("game1_heart_png");t.scaleX=0,t.scaleY=0,t.anchorOffsetX=t.width>>1,t.anchorOffsetY=t.height>>1,t.x=90,t.y=790,this.addChild(t),egret.Tween.get(t,{loop:!0}).to({scaleX:0,scaleY:0,y:790,alpha:0}).to({scaleX:.5,scaleY:.5,y:500,alpha:1},3e3).to({alpha:0,scaleX:.8,scaleY:.8,y:360},1e3),egret.Tween.get(t,{loop:!0}).to({x:95},300).to({x:90},300);var e=Global.createBitmapByName("game1_heart_png");e.scaleX=0,e.scaleY=0,e.anchorOffsetX=e.width>>1,e.anchorOffsetY=e.height>>1,e.x=550,e.y=790,this.addChild(e),egret.Tween.get(e,{loop:!0}).wait(500).to({scaleX:0,scaleY:0,y:790,alpha:0}).to({scaleX:.5,scaleY:.5,y:500,alpha:1},3e3).to({alpha:0,scaleX:1,scaleY:1,y:300},1e3),egret.Tween.get(e,{loop:!0}).to({x:560},300).to({x:550},300);var i=Global.createBitmapByName("game1_heart_png");i.scaleX=0,i.scaleY=0,i.anchorOffsetX=i.width>>1,i.anchorOffsetY=i.height>>1,i.x=580,i.y=790,this.addChild(i),egret.Tween.get(i,{loop:!0}).wait(1e3).to({scaleX:0,scaleY:0,y:790,alpha:0}).to({scaleX:.5,scaleY:.5,y:550,alpha:1},3e3).to({alpha:0,scaleX:1,scaleY:1,y:450},1e3),egret.Tween.get(i,{loop:!0}).to({x:590},300).to({x:580},300)
},e.prototype.touchBeginHandler=function(t){if(this.touchList.push(t.touchPointID),this.touchList.length>=2){var e=Global.createBitmapByName("game1_face_png");e.x=195,e.y=445,this.addChild(e),e.alpha=0,egret.Tween.get(e).to({alpha:1},1e3),this.play()}},e.prototype.touchEndHandler=function(t){this.touchList.splice(this.touchList.indexOf(t.touchPointID),1)},e.prototype.helpTouchHandler=function(){PopManager.showPop("HelpPop")},e}(GameBaseView);__reflect(Game1.prototype,"Game1");var Game2=function(_super){function Game2(){var t=_super.call(this)||this;t.isover=!1;var e=Global.createBitmapByName("game_bg_png");e.x=StageUtils.SW-e.width>>1,e.y=StageUtils.SH-e.height>>1,t.addChild(e);var i=Global.createBitmapByName("game2_title_png");i.x=(StageUtils.SW-i.width>>1)+10,i.y=-i.height,t.addChild(i),egret.Tween.get(i).to({y:20},800,egret.Ease.backOut);var n=Global.createBitmapByName("game_face_png");n.x=StageUtils.SW-n.width>>1,n.y=(StageUtils.SH-n.height>>1)+n.height,n.anchorOffsetY=n.height,t.addChild(n);var o=n.y;egret.Tween.get(n,{loop:!0}).to({y:o+0,scaleY:.9},100).to({y:o,scaleY:1},100);var a=Global.createBitmapByName("game2_btn_up_png");a.x=StageUtils.SW-a.width>>1,a.y=StageUtils.SH-a.height-100,t.addChild(a),t.btn=a,Global.setBut(a),a.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.btnTouchHandler,t),a.addEventListener(egret.TouchEvent.TOUCH_CANCEL,t.btnTouchEndHandler,t),a.addEventListener(egret.TouchEvent.TOUCH_END,t.btnTouchEndHandler,t),a.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.btnTouchEndHandler,t);var r=Global.createBitmapByName("game2_tips_png");r.x=StageUtils.SW-r.width>>1,r.y=StageUtils.SH-r.height-40,t.addChild(r),t.tips=r;var s=Global.createBitmapByName("btn_htlp_png");return s.x=25,s.y=270,t.addChild(s),Global.setBut(s),s.addEventListener(egret.TouchEvent.TOUCH_TAP,t.helpTouchHandler,t),t.initDanmuList(),t.timeContainer=new egret.DisplayObjectContainer,t.addChild(t.timeContainer),t.timer=new egret.Timer(1e3,10),t.timer.addEventListener(egret.TimerEvent.TIMER,t.timerHandler,t),t.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,t.timerCompleteHandler,t),t.lasttime=0,t}return __extends(Game2,_super),Game2.prototype.btnTouchHandler=function(){this.btn.texture=RES.getRes("game2_btn_down_png"),this.btn.x+=11,this.btn.y+=14,this.tips.visible=!1,this.showTime(),this.timer.start(),this.lasttime=0,this.isover=!1;var weixin=eval("wx");weixin.startRecord()},Game2.prototype.btnTouchEndHandler=function(){this.btn.texture=RES.getRes("game2_btn_up_png"),this.btn.x=StageUtils.SW-this.btn.width>>1,this.btn.y=StageUtils.SH-this.btn.height-100,this.tips.visible=!1,this.timeContainer.removeChildren(),this.timer.reset(),this.isover||(this.isover=!0,this.stopRecord())},Game2.prototype.helpTouchHandler=function(){PopManager.showPop("HelpPop")},Game2.prototype.showTime=function(){this.timeContainer.removeChildren();var t=Global.createBitmapByName("time_bg_png");t.x=199,t.y=929,this.timeContainer.addChild(t),this.num1=Global.createBitmapByName("time_0_png"),this.num1.x=370-this.num1.width,this.num1.y=960,this.timeContainer.addChild(this.num1),this.num2=Global.createBitmapByName("time_0_png"),this.num2.x=391-this.num2.width,this.num2.y=960,this.timeContainer.addChild(this.num2)},Game2.prototype.timerHandler=function(){this.lasttime++;var t=Math.floor(this.lasttime/10),e=this.lasttime%10;this.num1.texture=RES.getRes("time_"+t+"_png"),this.num1.x=370-this.num1.width,this.num2.texture=RES.getRes("time_"+e+"_png"),this.num2.x=391-this.num2.width},Game2.prototype.timerCompleteHandler=function(){this.isover||(this.isover=!0,this.stopRecord())},Game2.prototype.translateResult=function(t){var e=this;if(t)this.play();else{var i=Global.createBitmapByName("game2_tips_2_png");i.x=StageUtils.CW,i.y=StageUtils.CH,this.addChild(i),i.anchorOffsetX=i.width>>1,i.anchorOffsetY=i.height>>1,i.scaleX=i.scaleY=0,i.alpha=0,egret.Tween.get(i).to({alpha:1,scaleX:1,scaleY:1},500,egret.Ease.backOut).wait(2e3).call(function(){e.removeChild(i)})}},Game2.prototype.stopRecord=function(){var self=this,weixin=eval("wx");weixin.stopRecord({success:function(t){var e=t.localId;weixin.translateVoice({localId:e,isShowProgressTips:1,success:function(t){self.translateResult(t.translateResult)}})}})},Game2}(GameBaseView);__reflect(Game2.prototype,"Game2");var Game3=function(t){function e(){var e=t.call(this)||this;e.isMove=!1;var i=Global.createBitmapByName("game_bg_png");i.x=StageUtils.SW-i.width>>1,i.y=StageUtils.SH-i.height>>1,e.addChild(i),e.light=Global.createBitmapByName("game3_bg_light_png"),e.light.x=StageUtils.SW-e.light.width>>1,e.light.y=StageUtils.SH-e.light.height>>1,e.addChild(e.light),e.light.visible=!1;var n=Global.createBitmapByName("game3_title_png");n.x=(StageUtils.SW-n.width>>1)+10,n.y=-n.height,e.addChild(n),egret.Tween.get(n).to({y:20},800,egret.Ease.backOut);var o=Global.createBitmapByName("game3_tips_png");o.x=StageUtils.SW-o.width>>1,o.y=StageUtils.SH-o.height-240,e.addChild(o),e.tips=o;var a=Global.createBitmapByName("btn_htlp_png");a.x=25,a.y=StageUtils.SH-a.height-25,e.addChild(a),Global.setBut(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,e.helpTouchHandler,e);var r=Global.createBitmapByName("game3_yezi_png");r.x=(StageUtils.SW-r.width>>1)-45,r.y=StageUtils.SH-r.height>>1,e.addChild(r),e.yezi=r,egret.Tween.get(e.yezi,{loop:!0}).to({y:r.y+10},1e3).to({y:r.y},1e3);var s=Global.createBitmapByName("game3_bar_bg_png");s.x=34,s.y=StageUtils.SH-s.height>>1,e.addChild(s),e.bar=Global.createBitmapByName("game3_bar_png"),e.bar.x=34,e.bar.y=StageUtils.SH-e.bar.height>>1,e.addChild(e.bar);var h=Global.createBitmapByName("game3_bar_png");h.x=e.bar.x,h.y=e.bar.y+440,e.addChild(h),e.bar.mask=h,e.maskBar=h,e.light1=Global.createBitmapByName("game3_light_png"),e.light1.x=StageUtils.CW,e.light1.y=StageUtils.SH-e.light1.height-10+e.light1.height/2,e.light1.anchorOffsetX=e.light1.width>>1,e.light1.anchorOffsetY=e.light1.height>>1,e.addChild(e.light1),e.light1.visible=!1;var l=Global.createBitmapByName("game3_chuizi_png");l.x=560,l.y=585,l.anchorOffsetX=l.width-10,l.anchorOffsetY=l.height-10,e.addChild(l),e.chuizi=l;var c=Global.createBitmapByName("btn_start_png");return c.x=StageUtils.SW-c.width>>1,c.y=StageUtils.SH-c.height-105,e.addChild(c),Global.setBut(c),c.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.btnTouchHandler,e),c.addEventListener(egret.TouchEvent.TOUCH_END,e.btnTouchEndHandler,e),c.addEventListener(egret.TouchEvent.TOUCH_CANCEL,e.btnTouchEndHandler,e),c.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,e.btnTouchEndHandler,e),e.btnStart=c,e}return __extends(e,t),e.prototype.btnTouchHandler=function(){this.light1.visible=!0,this.light1.scaleX=this.light1.scaleY=.3,this.light1.alpha=.3,egret.Tween.get(this.light1,{loop:!0}).to({scaleX:1,scaleY:1,alpha:1},800).to({scaleX:.3,scaleY:.3,alpha:.3},500),egret.Tween.get(this.maskBar,{loop:!0}).to({y:this.bar.y},1e3).to({y:this.bar.y+440},1e3)},e.prototype.btnTouchEndHandler=function(){var t=this;egret.Tween.removeTweens(this.light1),this.light1.visible=!1,egret.Tween.removeTweens(this.maskBar),this.maskBar.y<this.bar.y+150?egret.Tween.get(this.chuizi).to({alpha:1,rotation:30},400,egret.Ease.circOut).to({rotation:0},200,egret.Ease.backIn).call(function(){t.showOpenYezi()}):egret.Tween.get(this.maskBar).to({y:this.bar.y+440},500)},e.prototype.helpTouchHandler=function(){PopManager.showPop("HelpPop")},e.prototype.openYezi=function(){var t=this;this.btnStart.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.btnTouchHandler,this),this.btnStart.removeEventListener(egret.TouchEvent.TOUCH_END,this.btnTouchEndHandler,this),this.btnStart.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.btnTouchEndHandler,this),this.btnStart.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.btnTouchEndHandler,this);var e=Global.createBitmapByName("game3_chuizi_png");e.x=560,e.y=585,e.anchorOffsetX=e.width-10,e.anchorOffsetY=e.height-10,this.addChild(e),egret.Tween.get(e).to({alpha:1,rotation:30},400,egret.Ease.circOut).to({rotation:0},200,egret.Ease.backIn).call(function(){t.showOpenYezi()})},e.prototype.showOpenYezi=function(){var t=this;egret.Tween.removeTweens(this.yezi);var e=this.yezi.x,i=this.yezi.y;egret.Tween.get(this.yezi).to({x:e+5},100).to({x:e},100).to({y:i+5},100).to({y:i},100),this.light.visible=!0;var n=Global.createBitmapByName("game3_liefeng_png");n.x=195,n.y=290,this.addChild(n),n.alpha=0;var o=Global.createBitmapByName("game3_light1_png");o.x=20,o.y=235,this.addChild(o),egret.Tween.get(n).wait(0).to({alpha:1},100).wait(500).call(function(){t.play()})},e}(GameBaseView);__reflect(Game3.prototype,"Game3");var egret;!function(t){var e=function(e){function i(i){void 0===i&&(i=null);var n=e.call(this)||this;return n.scrollBeginThreshold=10,n.scrollSpeed=1,n._content=null,n.delayTouchBeginEvent=null,n.touchBeginTimer=null,n.touchEnabled=!0,n._ScrV_Props_=new t.ScrollViewProperties,i&&n.setContent(i),n}return __extends(i,e),Object.defineProperty(i.prototype,"bounces",{get:function(){return this._ScrV_Props_._bounces},set:function(t){this._ScrV_Props_._bounces=!!t},enumerable:!0,configurable:!0}),i.prototype.setContent=function(t){this._content!==t&&(this.removeContent(),t&&(this._content=t,e.prototype.addChild.call(this,t),this._addEvents()))},i.prototype.removeContent=function(){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0)),this._content=null},Object.defineProperty(i.prototype,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(t){t!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"horizontalScrollPolicy",{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(t){t!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(t){t!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=t,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollTop",{get:function(){return this._ScrV_Props_._scrollTop},set:function(t){t!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=t,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0}),i.prototype.setScrollPosition=function(t,e,i){if(void 0===i&&(i=!1),(!i||0!=t||0!=e)&&(i||this._ScrV_Props_._scrollTop!=t||this._ScrV_Props_._scrollLeft!=e)){var n=this._ScrV_Props_._scrollTop,o=this._ScrV_Props_._scrollLeft;if(i){var a=this.getMaxScrollLeft(),r=this.getMaxScrollTop();(0>=n||n>=r)&&(t/=2),(0>=o||o>=a)&&(e/=2);var s=n+t,h=o+e,l=this._ScrV_Props_._bounces;l||((0>=s||s>=r)&&(s=Math.max(0,Math.min(s,r))),(0>=h||h>=a)&&(h=Math.max(0,Math.min(h,a)))),this._ScrV_Props_._scrollTop=s,this._ScrV_Props_._scrollLeft=h}else this._ScrV_Props_._scrollTop=t,this._ScrV_Props_._scrollLeft=e;this._validatePosition(!0,!0),this._updateContentPosition()}},i.prototype._validatePosition=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t){var i=this.height,n=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-i)/2),this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,n>i?n-i/2:i/2)}if(e){var o=this.width,a=this._getContentWidth();this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-o)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,a>o?a-o/2:o/2)}},i.prototype.$setWidth=function(t){if(this.$getExplicitWidth()==t)return!1;var i=e.prototype.$setWidth.call(this,t);return this._updateContentPosition(),i},i.prototype.$setHeight=function(t){if(this.$getExplicitHeight()==t)return!1;e.prototype.$setHeight.call(this,t);return this._updateContentPosition(),!0},i.prototype._updateContentPosition=function(){var e=this.height,i=this.width;this.scrollRect=new t.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),i,e),this.dispatchEvent(new t.Event(t.Event.CHANGE))},i.prototype._checkScrollPolicy=function(){var t=this._ScrV_Props_._horizontalScrollPolicy,e=this.__checkScrollPolicy(t,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=e;var i=this._ScrV_Props_._verticalScrollPolicy,n=this.__checkScrollPolicy(i,this._getContentHeight(),this.height);return this._ScrV_Props_._vCanScroll=n,e||n},i.prototype.__checkScrollPolicy=function(t,e,i){return"on"==t?!0:"off"==t?!1:e>i},i.prototype._addEvents=function(){this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},i.prototype._removeEvents=function(){this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},i.prototype._onTouchBegin=function(e){if(!e.$isDefaultPrevented){var i=this._checkScrollPolicy();i&&(this._ScrV_Props_._touchStartPosition.x=e.stageX,this._ScrV_Props_._touchStartPosition.y=e.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this._tempStage=this.stage,this._tempStage.addEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.addEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(e),e.preventDefault())}},i.prototype._onTouchBeginCapture=function(e){var i=this._checkScrollPolicy();if(i){for(var n=e.target;n!=this;){if("_checkScrollPolicy"in n&&(i=n._checkScrollPolicy()))return;n=n.parent}e.stopPropagation();var o=this.cloneTouchEvent(e);this.delayTouchBeginEvent=o,this.touchBeginTimer||(this.touchBeginTimer=new t.Timer(100,1),this.touchBeginTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)),this.touchBeginTimer.start(),this._onTouchBegin(e)}},i.prototype._onTouchEndCapture=function(e){var i=this;if(this.delayTouchBeginEvent){this._onTouchBeginTimer(),e.stopPropagation();var n=this.cloneTouchEvent(e);t.callLater(function(){i.stage&&i.dispatchPropagationEvent(n)},this)}},i.prototype._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var t=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null,this.stage&&this.dispatchPropagationEvent(t)},i.prototype.dispatchPropagationEvent=function(e){for(var i=e.$target,n=this.$getPropagationList(i),o=n.length,a=.5*n.length,r=-1,s=0;o>s;s++)if(n[s]===this._content){r=s;break}n.splice(0,r+1),a-=r+1,this.$dispatchPropagationEvent(e,n,a),t.Event.release(e)},i.prototype._onTouchMove=function(t){if(this._ScrV_Props_._lastTouchPosition.x!=t.stageX||this._ScrV_Props_._lastTouchPosition.y!=t.stageY){if(!this._ScrV_Props_._scrollStarted){var e=t.stageX-this._ScrV_Props_._touchStartPosition.x,i=t.stageY-this._ScrV_Props_._touchStartPosition.y,n=Math.sqrt(e*e+i*i);if(n<this.scrollBeginThreshold)return void this._logTouchEvent(t)}this._ScrV_Props_._scrollStarted=!0,this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop()),this.touchChildren=!1;var o=this._getPointChange(t);this.setScrollPosition(o.y,o.x,!0),this._calcVelocitys(t),this._logTouchEvent(t)}},i.prototype._onTouchEnd=function(e){this.touchChildren=!0,this._ScrV_Props_._scrollStarted=!1,this._tempStage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.removeEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.removeEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._moveAfterTouchEnd()},i.prototype._onEnterFrame=function(e){var i=t.getTimer();i-this._ScrV_Props_._lastTouchTime>100&&i-this._ScrV_Props_._lastTouchTime<300&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)},i.prototype._logTouchEvent=function(e){this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY,this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(e),this._ScrV_Props_._lastTouchTime=t.getTimer()},i.prototype._getPointChange=function(t){return{x:this._ScrV_Props_._hCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.x-t.stageX,y:this._ScrV_Props_._vCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.y-t.stageY}},i.prototype._calcVelocitys=function(e){var i=t.getTimer();if(0==this._ScrV_Props_._lastTouchTime)return void(this._ScrV_Props_._lastTouchTime=i);var n=this._getPointChange(e),o=i-this._ScrV_Props_._lastTouchTime;n.x/=o,n.y/=o,this._ScrV_Props_._velocitys.push(n),this._ScrV_Props_._velocitys.length>5&&this._ScrV_Props_._velocitys.shift(),this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY},i.prototype._getContentWidth=function(){return this._content.$getExplicitWidth()||this._content.width},i.prototype._getContentHeight=function(){return this._content.$getExplicitHeight()||this._content.height},i.prototype.getMaxScrollLeft=function(){var t=this._getContentWidth()-this.width;return Math.max(0,t)},i.prototype.getMaxScrollTop=function(){var t=this._getContentHeight()-this.height;return Math.max(0,t)},i.prototype._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var t={x:0,y:0},e=0,n=0;n<this._ScrV_Props_._velocitys.length;n++){var o=this._ScrV_Props_._velocitys[n],a=i.weight[n];t.x+=o.x*a,t.y+=o.y*a,e+=a}this._ScrV_Props_._velocitys.length=0,this.scrollSpeed<=0&&(this.scrollSpeed=1);var r=t.x/e*this.scrollSpeed,s=t.y/e*this.scrollSpeed,h=Math.abs(r),l=Math.abs(s),c=this.getMaxScrollLeft(),p=this.getMaxScrollTop(),d=h>.02?this.getAnimationDatas(r,this._ScrV_Props_._scrollLeft,c):{position:this._ScrV_Props_._scrollLeft,duration:1},u=l>.02?this.getAnimationDatas(s,this._ScrV_Props_._scrollTop,p):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(d.position,d.duration),this.setScrollTop(u.position,u.duration)}},i.prototype.onTweenFinished=function(t){t==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1),t==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1),0==this._ScrV_Props_._isHTweenPlaying&&0==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()},i.prototype._onScrollStarted=function(){},i.prototype._onScrollFinished=function(){t.ScrollTween.removeTweens(this),this._ScrV_Props_._hScrollTween=null,this._ScrV_Props_._vScrollTween=null,this._ScrV_Props_._isHTweenPlaying=!1,this._ScrV_Props_._isVTweenPlaying=!1,this.dispatchEvent(new t.Event(t.Event.COMPLETE))},i.prototype.setScrollTop=function(e,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollTop(),Math.max(e,0));if(0==i)return void(this.scrollTop=n);0==this._ScrV_Props_._bounces&&(e=n);var o=t.ScrollTween.get(this).to({scrollTop:e},i,t.ScrollEase.quartOut);n!=e&&o.to({scrollTop:n},300,t.ScrollEase.quintOut),this._ScrV_Props_._isVTweenPlaying=!0,this._ScrV_Props_._vScrollTween=o,o.call(this.onTweenFinished,this,[o]),this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted()},i.prototype.setScrollLeft=function(e,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollLeft(),Math.max(e,0));if(0==i)return void(this.scrollLeft=n);0==this._ScrV_Props_._bounces&&(e=n);var o=t.ScrollTween.get(this).to({scrollLeft:e},i,t.ScrollEase.quartOut);n!=e&&o.to({scrollLeft:n},300,t.ScrollEase.quintOut),this._ScrV_Props_._isHTweenPlaying=!0,this._ScrV_Props_._hScrollTween=o,o.call(this.onTweenFinished,this,[o]),this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted()},i.prototype.getAnimationDatas=function(t,e,i){var n=Math.abs(t),o=.95,a=0,r=.998,s=.02,h=e+500*t;if(0>h||h>i)for(h=e;Math.abs(t)!=1/0&&Math.abs(t)>s;)h+=t,t*=0>h||h>i?r*o:r,a++;else a=500*-Math.log(s/n);var l={position:Math.min(i+50,Math.max(h,-50)),duration:a};return l},i.prototype.cloneTouchEvent=function(e){var i=new t.TouchEvent(e.type,e.bubbles,e.cancelable);return i.touchPointID=e.touchPointID,i.$stageX=e.stageX,i.$stageY=e.stageY,i.touchDown=e.touchDown,i.$isDefaultPrevented=!1,i.$target=e.target,i},i.prototype.throwNotSupportedError=function(){t.$error(1023)},i.prototype.addChild=function(t){return this.throwNotSupportedError(),null},i.prototype.addChildAt=function(t,e){return this.throwNotSupportedError(),null},i.prototype.removeChild=function(t){return this.throwNotSupportedError(),null},i.prototype.removeChildAt=function(t){return this.throwNotSupportedError(),null},i.prototype.setChildIndex=function(t,e){this.throwNotSupportedError()},i.prototype.swapChildren=function(t,e){this.throwNotSupportedError()},i.prototype.swapChildrenAt=function(t,e){this.throwNotSupportedError()},i}(t.DisplayObjectContainer);e.weight=[1,1.33,1.66,2,2.33],t.CustomScrollView=e,__reflect(e.prototype,"egret.CustomScrollView")}(egret||(egret={}));var ShareView=function(t){function e(){var e=t.call(this)||this,i=new CustomImage("resource/assets/share/share_bg_"+Main.type+".jpg",!0,function(){i.width=StageUtils.SW,i.height=StageUtils.SH});return e.addChild(i),2==Main.type?Main.content=[{nickname:"",headimgurl:"",content:"1",type:"2"},{nickname:"",headimgurl:"",content:"2",type:"2"},{nickname:"",headimgurl:"",content:"3",type:"2"},{nickname:"",headimgurl:"",content:"4",type:"2"}]:Main.content=[{nickname:"",headimgurl:"",content:"1",type:"0"},{nickname:"",headimgurl:"",content:"2",type:"0"},{nickname:"",headimgurl:"",content:"3",type:"0"},{nickname:"",headimgurl:"",content:"4",type:"0"},{nickname:"",headimgurl:"",content:"5",type:"0"},{nickname:"",headimgurl:"",content:"6",type:"0"},{nickname:"",headimgurl:"",content:"7",type:"0"},{nickname:"",headimgurl:"",content:"8",type:"0"}],e.initDanmuList(),e}return __extends(e,t),e}(GameBaseView);__reflect(ShareView.prototype,"ShareView");var HelpPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(e){void 0===e&&(e=null),t.prototype.setData.call(this,e);var i=new CustomImage("resource/assets/asyn/action_bg.png",!0,function(){i.x=StageUtils.SW-i.width>>1,i.y=StageUtils.SH-i.height>>1});this.addChild(i);var n=new egret.ScrollView;n.width=473,n.height=450,n.y=415,this.addChild(n);var o=new CustomImage("resource/assets/asyn/action.png",!0,function(){n.setContent(o),n.x=StageUtils.SW-o.width>>1}),a=Global.createBitmapByName("btn_up_png");a.x=StageUtils.SW-a.width>>1,a.y=StageUtils.SH-160,this.addChild(a);var r=Global.createBitmapByName("btn_close_png");r.x=545,r.y=133,this.addChild(r),Global.setBut(r),r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeHandler,this)},e.prototype.closeHandler=function(){PopManager.hidePop("HelpPop")},e}(PopView);__reflect(HelpPop.prototype,"HelpPop");var InfoPop=function(_super){function InfoPop(){return _super.call(this)||this}return __extends(InfoPop,_super),InfoPop.prototype.setData=function(t){_super.prototype.setData.call(this,t),this.container=new egret.DisplayObjectContainer,this.addChild(this.container);var e=new CustomImage("resource/assets/asyn/info_bg.png",!0,function(){e.x=StageUtils.SW-e.width>>1,e.y=StageUtils.SH-e.height>>1});this.container.addChild(e);var i=Global.createBitmapByName("btn_input_png");i.x=StageUtils.SW-i.width>>1,i.y=870,this.container.addChild(i),Global.setBut(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareHandler,this)},InfoPop.prototype.shareHandler=function(){var self=this,weixin=eval("wx");weixin.openAddress({success:function(t){var e=t.userName,i=t.telNumber,n=t.cityName+""+t.countryName;11!=i.length?Message.show("手机号必须为11位！"):e&&i&&n?self.submit(e,i,n):Message.show("请填写全部信息!")},cancel:function(){self.initInputView()}})},InfoPop.prototype.submitHandler=function(){var t=this.txtName.text.trim(),e=this.txtPhone.text.trim(),i=this.txtCity.text.trim(),n=this.txtQu.text.trim();11!=e.length?Message.show("手机号必须为11位！"):t&&e&&i&&n?this.submit(t,e,i+""+n):Message.show("请填写完整信息！")},InfoPop.prototype.initInputView=function(){var t=this;t.container.removeChildren();var e=new CustomImage("resource/assets/asyn/info_bg_copy.png",!0,function(){e.x=StageUtils.SW-e.width>>1,e.y=StageUtils.SH-e.height>>1});t.container.addChild(e);var i=Global.createBitmapByName("btn_ok_png");i.x=StageUtils.SW-i.width>>1,i.y=870,t.container.addChild(i),Global.setBut(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,t.submitHandler,t),t.txtName=new egret.TextField,t.txtName.type=egret.TextFieldType.INPUT,t.txtName.x=185,t.txtName.y=382,t.txtName.width=350,t.container.addChild(t.txtName),t.txtPhone=new egret.TextField,t.txtPhone.type=egret.TextFieldType.INPUT,t.txtPhone.x=185,t.txtPhone.y=496,t.txtPhone.width=350,t.txtPhone.maxChars=11,t.txtPhone.restrict="0-9",t.container.addChild(t.txtPhone),t.txtCity=new egret.TextField,t.txtCity.type=egret.TextFieldType.INPUT,t.txtCity.x=250,t.txtCity.y=602,t.txtCity.width=300,t.container.addChild(t.txtCity),t.txtQu=new egret.TextField,t.txtQu.type=egret.TextFieldType.INPUT,t.txtQu.x=200,t.txtQu.y=710,t.txtQu.width=350,t.container.addChild(t.txtQu)},InfoPop.prototype.submit=function(t,e,i){var n,o=t+","+e+","+i;sessionStorage.getItem("addr");n="cashed"==Main.step?sessionStorage.getItem("confirmticket0"):sessionStorage.getItem("confirmticket"),$.ajax({url:sessionStorage.getItem("interface"),data:{ticket:n,ADDR:o},success:function(t){"success"==t.result?(PopManager.hidePop("InfoPop"),PopManager.showPop("OkPop"),sessionStorage.setItem("confirmticket2",t.prize.ticket)):PopManager.showPop("ErrorPop",2)},error:function(){},timeout:8e3,dataType:"json",async:!0,type:"POST",complete:function(t,e){}})},InfoPop}(PopView);__reflect(InfoPop.prototype,"InfoPop");var InputPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(e){t.prototype.setData.call(this,e);var i=new CustomImage("resource/assets/asyn/input_bg.png",!0,function(){i.x=StageUtils.SW-i.width>>1,i.y=(StageUtils.SH-i.height>>1)-100});this.addChild(i),this.txtCard=new egret.TextField,this.txtCard.type=egret.TextFieldType.INPUT,this.txtCard.y=440,this.txtCard.width=450,this.txtCard.x=StageUtils.SW-this.txtCard.width>>1,this.addChild(this.txtCard);var n=new egret.TextField;n.size=25,n.text="请致电400人工客服索要兑奖码",n.x=150,n.y=520,this.addChild(n);var o=Global.createBitmapByName("btn_ok_png");o.x=StageUtils.SW-o.width>>1,o.y=650,this.addChild(o),Global.setBut(o),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareHandler,this);var a=Global.createBitmapByName("btn_400_png");a.x=StageUtils.SW-a.width>>1,a.y=760,this.addChild(a),Global.setBut(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.phoneHandler,this)},e.prototype.shareHandler=function(){var t=this.txtCard.text;if(t){$.ajax({url:sessionStorage.getItem("interface"),data:{ticket:sessionStorage.getItem("confirmticket2"),UUID6:t},success:function(t){"success"==t.result?(Main.share(!0),PopManager.hidePop("InputPop"),PopManager.showPop("SuccessPop")):PopManager.showPop("ErrorPop",3)},error:function(){},timeout:8e3,dataType:"json",async:!0,type:"POST",complete:function(t,e){}})}else Message.show("请输入兑奖码!")},e.prototype.phoneHandler=function(){window.location.href="tel:4000828079"},e}(PopView);__reflect(InputPop.prototype,"InputPop");var OkPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(e){t.prototype.setData.call(this,e);var i=new CustomImage("resource/assets/asyn/ok_bg.png",!0,function(){i.x=StageUtils.SW-i.width>>1,i.y=(StageUtils.SH-i.height>>1)-100});this.addChild(i);var n=Global.createBitmapByName("btn_get_png");n.x=StageUtils.SW-n.width>>1,n.y=650,this.addChild(n),Global.setBut(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareHandler,this);var o=Global.createBitmapByName("btn_400_png");o.x=StageUtils.SW-o.width>>1,o.y=760,this.addChild(o),Global.setBut(o),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.phoneHandler,this)},e.prototype.shareHandler=function(){PopManager.hidePop("OkPop"),PopManager.showPop("InputPop")},e.prototype.phoneHandler=function(){window.location.href="tel:4000828079"},e}(PopView);__reflect(OkPop.prototype,"OkPop");var SharePop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(e){t.prototype.setData.call(this,e);var i="";i=e?"resource/assets/asyn/end_no.png":"resource/assets/asyn/share.png";var n=new CustomImage(i,!0,function(){n.x=StageUtils.SW-n.width>>1,n.y=30});this.addChild(n)},e}(PopView);__reflect(SharePop.prototype,"SharePop");var SuccessPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(e){t.prototype.setData.call(this,e);var i=new CustomImage("resource/assets/asyn/success_bg.png",!0,function(){i.x=StageUtils.SW-i.width>>1,i.y=(StageUtils.SH-i.height>>1)-100});this.addChild(i);var n=Global.createBitmapByName("btn_share_friend_png");n.x=StageUtils.SW-n.width>>1,n.y=650,this.addChild(n),Global.setBut(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareHandler,this)},e.prototype.shareHandler=function(){PopManager.hidePop("SuccessPop"),PopManager.showPop("SharePop")},e}(PopView);__reflect(SuccessPop.prototype,"SuccessPop");